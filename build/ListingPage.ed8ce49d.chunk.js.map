{"version":3,"sources":["containers/ListingPage/EditIcon.js","containers/ListingPage/ActionBarMaybe.js","containers/ListingPage/SectionImages.js","containers/ListingPage/SectionAvatar.js","containers/ListingPage/SectionHeading.js","containers/ListingPage/SectionDescriptionMaybe.js","containers/ListingPage/SectionFeaturesMaybe.js","containers/ListingPage/SectionReviews.js","containers/ListingPage/SectionHostMaybe.js","containers/ListingPage/SectionRulesMaybe.js","containers/ListingPage/SectionMapMaybe.js","containers/ListingPage/ListingPage.js","containers/ListingPage/ListingPage.module.css","containers/ListingPage/SectionRulesMaybe.module.css"],"names":["EditIcon","props","className","width","height","viewBox","version","xmlns","stroke","strokeWidth","fill","fillRule","strokeLinecap","strokeLinejoin","transform","points","d","defaultProps","PropTypes","string","ActionBarMaybe","isOwnListing","listing","editParams","state","attributes","isPendingApproval","LISTING_STATE_PENDING_APPROVAL","isClosed","LISTING_STATE_CLOSED","isDraft","LISTING_STATE_DRAFT","ownListingTextTranslationId","message","ownListingTextClasses","classNames","css","ownListingText","ownListingTextPendingApproval","actionBar","id","editListingLink","name","params","editIcon","closedListingText","displayName","SectionImages","title","handleViewPhotosClick","imageCarouselOpen","onImageCarouselClose","onManageDisableScrolling","hasImages","images","length","firstImage","onClick","e","stopPropagation","viewPhotosButton","viewPhotos","values","count","sectionImages","threeToTwoWrapper","aspectWrapper","rootClassName","rootForImage","alt","image","variants","scrollLayerClassName","carouselModalScrollLayer","containerClassName","carouselModalContainer","lightCloseButton","isOpen","onClose","usePortal","SectionAvatar","user","sectionAvatar","to","hash","avatarDesktop","disableProfileLink","avatarMobile","SectionHeading","priceTitle","formattedPrice","richTitle","category","hostLink","showContactUser","onContactUser","unitType","config","bookingUnitType","isNightly","LINE_ITEM_NIGHT","isDaily","LINE_ITEM_DAY","unitTranslationKey","sectionHeading","desktopPriceContainer","desktopPriceValue","desktopPerUnit","heading","author","contactWrapper","separator","contactLink","enforcePagePreloadFor","SectionDescriptionMaybe","description","sectionDescription","descriptionTitle","richText","longWordMinLength","longWordClass","longWord","SectionFeaturesMaybe","options","publicData","selectedOptions","amenities","sectionFeatures","featuresTitle","twoColumns","SectionReviews","reviews","fetchReviewsError","reviewsError","errorText","sectionReviews","reviewsHeading","SectionHostMaybe","authorDisplayName","isEnquiryModalOpen","onCloseEnquiryModal","sendEnquiryError","sendEnquiryInProgress","onSubmitEnquiry","currentUser","sectionHost","yourHostHeading","contentClassName","enquiryModalContent","enquiryForm","submitButtonWrapperClassName","enquirySubmitButtonWrapper","listingTitle","onSubmit","inProgress","SectionRulesMaybe","classes","root","rules","SectionMapMaybe","isStatic","this","geolocation","listingId","address","location","sectionMap","cacheKey","uuid","lat","lng","mapProps","maps","fuzzy","enabled","obfuscatedCenter","obfuscatedCoordinates","center","map","useStaticMap","locationTitle","setState","Component","UUID","sdkTypes","categoryLabel","categories","key","cat","find","c","label","ListingPageComponent","enquiryModalOpenForListingId","pageClassNames","enquiryModalOpen","handleSubmit","bind","history","getListing","callSetInitialValues","onInitializeCardPaymentData","bookingDates","initialValues","bookingData","bookingStart","startDate","bookingEnd","endDate","confirmPaymentError","saveToSessionStorage","routes","routeConfiguration","findRouteByRouteName","setInitialValues","push","createResourceLocatorString","slug","createSlug","from","pathname","search","onSendEnquiry","trim","then","txId","catch","isAuthenticated","getOwnListing","intl","rawParams","scrollingDisabled","showListingError","timeSlots","fetchTimeSlotsError","filterConfig","onFetchTransactionLineItems","lineItems","fetchLineItemsInProgress","fetchLineItemsError","isPendingApprovalVariant","variant","LISTING_PAGE_PENDING_APPROVAL_VARIANT","isDraftVariant","LISTING_PAGE_DRAFT_VARIANT","currentListing","ensureOwnListing","ensureListing","listingSlug","listingType","LISTING_PAGE_PARAM_TYPE_DRAFT","LISTING_PAGE_PARAM_TYPE_EDIT","listingTab","isApproved","pendingIsApproved","pendingOtherUsersListing","status","price","bookingTitle","bookingSubTitle","formatMessage","topbar","errorTitle","pageRoot","loadingTitle","loadingText","authorAvailable","currentAuthor","ensuredAuthor","ensureUser","userDisplayNameAsString","currency","formatMoney","priceData","listingImages","variantName","sizes","size","i","filter","facebookImages","twitterImages","schemaImages","JSON","stringify","img","url","siteTitle","schemaTitle","authorNameLink","amenityOptions","findOptionsForSelectFilter","categoryOptions","contentType","schema","type","tab","contentContainer","mainContent","bookingPanel","isCurrentlyClosed","window","scrollTo","subTitle","custom","filters","ListingPage","compose","withRouter","connect","Auth","ref","listings","getMarketplaceEntities","isScrollingDisabled","dispatch","componentId","disableScrolling","manageDisableScrolling","fetchTransactionLineItems","sendEnquiry","initializeCardPaymentData","injectIntl","module","exports"],"mappings":"ydAGMA,EAAW,SAAAC,GACf,IAAQC,EAAcD,EAAdC,UACR,OACE,qBACEA,UAAWA,EACXC,MAAM,OACNC,OAAO,OACPC,QAAQ,YACRC,QAAQ,MACRC,MAAM,6BANR,SAQE,mBACEC,OAAO,OACPC,YAAY,IACZC,KAAK,OACLC,SAAS,UACTC,cAAc,QACdC,eAAe,QANjB,SAQE,mBAAGC,UAAU,qCAAqCN,OAAO,UAAzD,SACE,mBAAGM,UAAU,iCAAb,SACE,oBAAGA,UAAU,mCAAb,UACE,yBAASC,OAAO,+EAChB,sBAAMC,EAAE,iCACR,sBAAMA,EAAE,gDAStBhB,EAASiB,aAAe,CAAEf,UAAW,MAElBgB,IAAXC,OAAR,IAIenB,I,kBC3BFoB,EAAiB,SAAAnB,GAC5B,IAAQoB,EAAsCpB,EAAtCoB,aAAcC,EAAwBrB,EAAxBqB,QAASC,EAAetB,EAAfsB,WACzBC,EAAQF,EAAQG,WAAWD,MAC3BE,EAAoBF,IAAUG,IAC9BC,EAAWJ,IAAUK,IACrBC,EAAUN,IAAUO,IAE1B,GAAIV,EAAc,CAChB,IAAIW,EAA8B,yBAE9BN,EACFM,EAA8B,wCACrBJ,EACTI,EAA8B,+BACrBF,IACTE,EAA8B,+BAGhC,IAAMC,EAAUH,EAAU,4BAA8B,0BAElDI,EAAwBC,IAAWC,IAAIC,eAAL,OACrCD,IAAIE,8BAAgCZ,IAGvC,OACE,sBAAKxB,UAAWkC,IAAIG,UAApB,UACE,mBAAGrC,UAAWgC,EAAd,SACE,cAAC,IAAD,CAAkBM,GAAIR,MAExB,eAAC,KAAD,CAAW9B,UAAWkC,IAAIK,gBAAiBC,KAAK,kBAAkBC,OAAQpB,EAA1E,UACE,cAAC,EAAD,CAAUrB,UAAWkC,IAAIQ,WACzB,cAAC,IAAD,CAAkBJ,GAAIP,UAIvB,OAAIL,EAEP,qBAAK1B,UAAWkC,IAAIG,UAApB,SACE,mBAAGrC,UAAWkC,IAAIS,kBAAlB,SACE,cAAC,IAAD,CAAkBL,GAAG,kCAKtB,MASTpB,EAAe0B,YAAc,iBAEd1B,QCIA2B,EAnEO,SAAA9C,GACpB,IACE+C,EAQE/C,EARF+C,MACA1B,EAOErB,EAPFqB,QACAD,EAMEpB,EANFoB,aACAE,EAKEtB,EALFsB,WACA0B,EAIEhD,EAJFgD,sBACAC,EAGEjD,EAHFiD,kBACAC,EAEElD,EAFFkD,qBACAC,EACEnD,EADFmD,yBAGIC,EAAY/B,EAAQgC,QAAUhC,EAAQgC,OAAOC,OAAS,EACtDC,EAAaH,EAAY/B,EAAQgC,OAAO,GAAK,KAI7Cf,EAAYjB,EAAQkB,GACxB,qBAAKiB,QAAS,SAAAC,GAAC,OAAIA,EAAEC,mBAArB,SACE,cAAC,EAAD,CAAgBtC,aAAcA,EAAcC,QAASA,EAASC,WAAYA,MAE1E,KAEEqC,EAAmBP,EACvB,wBAAQnD,UAAWkC,IAAIyB,WAAYJ,QAASR,EAA5C,SACE,cAAC,IAAD,CACET,GAAG,+BACHsB,OAAQ,CAAEC,MAAOzC,EAAQgC,OAAOC,YAGlC,KAEJ,OACE,sBAAKrD,UAAWkC,IAAI4B,cAApB,UACE,qBAAK9D,UAAWkC,IAAI6B,kBAApB,SACE,sBAAK/D,UAAWkC,IAAI8B,cAAeT,QAASR,EAA5C,UACGV,EACD,cAAC,KAAD,CACE4B,cAAe/B,IAAIgC,aACnBC,IAAKrB,EACLsB,MAAOd,EACPe,SAAU,CACR,iBACA,mBACA,mBACA,sBAGHX,OAGL,cAAC,KAAD,CACEpB,GAAG,4BACHgC,qBAAsBpC,IAAIqC,yBAC1BC,mBAAoBtC,IAAIuC,uBACxBC,kBAAgB,EAChBC,OAAQ3B,EACR4B,QAAS3B,EACT4B,WAAS,EACT3B,yBAA0BA,EAR5B,SAUE,cAAC,KAAD,CAAeE,OAAQhC,EAAQgC,eCjDxB0B,EAdO,SAAA/E,GACpB,IAAQgF,EAAiBhF,EAAjBgF,KAAMtC,EAAW1C,EAAX0C,OACd,OACE,sBAAKzC,UAAWkC,IAAI8C,cAApB,UACE,cAAC,KAAD,CAAWxC,KAAK,cAAcC,OAAQA,EAAQwC,GAAI,CAAEC,KAAM,SAA1D,SACE,cAAC,IAAD,CAAaH,KAAMA,EAAM/E,UAAWkC,IAAIiD,cAAeC,oBAAkB,MAE3E,cAAC,KAAD,CAAW5C,KAAK,cAAcC,OAAQA,EAAQwC,GAAI,CAAEC,KAAM,SAA1D,SACE,cAAC,IAAD,CAAcH,KAAMA,EAAM/E,UAAWkC,IAAImD,aAAcD,oBAAkB,UCiDlEE,EAtDQ,SAAAvF,GACrB,IACEwF,EAOExF,EAPFwF,WACAC,EAMEzF,EANFyF,eACAC,EAKE1F,EALF0F,UACAC,EAIE3F,EAJF2F,SACAC,EAGE5F,EAHF4F,SACAC,EAEE7F,EAFF6F,gBACAC,EACE9F,EADF8F,cAGIC,EAAWC,IAAOC,gBAClBC,EAAYH,IAAaI,IACzBC,EAAUL,IAAaM,IAEvBC,EAAqBJ,EACvB,uBACAE,EACA,qBACA,sBAEJ,OACE,sBAAKnG,UAAWkC,IAAIoE,eAApB,UACE,sBAAKtG,UAAWkC,IAAIqE,sBAApB,UACE,qBAAKvG,UAAWkC,IAAIsE,kBAAmB1D,MAAOyC,EAA9C,SACGC,IAEH,qBAAKxF,UAAWkC,IAAIuE,eAApB,SACE,cAAC,IAAD,CAAkBnE,GAAI+D,SAG1B,sBAAKrG,UAAWkC,IAAIwE,QAApB,UACE,oBAAI1G,UAAWkC,IAAIY,MAAnB,SAA2B2C,IAC3B,sBAAKzF,UAAWkC,IAAIyE,OAApB,UACGjB,EACD,cAAC,IAAD,CAAkBpD,GAAG,uBAAuBsB,OAAQ,CAAEpB,KAAMmD,KAC3DC,EACC,uBAAM5F,UAAWkC,IAAI0E,eAArB,UACE,sBAAM5G,UAAWkC,IAAI2E,UAArB,oBACA,cAAC,KAAD,CACE5C,cAAe/B,IAAI4E,YACnBvD,QAASsC,EACTkB,sBAAsB,aAHxB,SAKE,cAAC,IAAD,CAAkBzE,GAAG,iCAGvB,eC9BC0E,GAjBiB,SAAAjH,GAC9B,IAAQkH,EAAgBlH,EAAhBkH,YACR,OAAOA,EACL,sBAAKjH,UAAWkC,IAAIgF,mBAApB,UACE,oBAAIlH,UAAWkC,IAAIiF,iBAAnB,SACE,cAAC,IAAD,CAAkB7E,GAAG,mCAEvB,mBAAGtC,UAAWkC,IAAI+E,YAAlB,SACGG,YAASH,EAAa,CACrBI,kBAXuC,GAYvCC,cAAepF,IAAIqF,gBAIvB,MCMSC,GAtBc,SAAAzH,GAC3B,IAAQ0H,EAAwB1H,EAAxB0H,QAASC,EAAe3H,EAAf2H,WACjB,IAAKA,EACH,OAAO,KAGT,IAAMC,EAAkBD,GAAcA,EAAWE,UAAYF,EAAWE,UAAY,GACpF,OACE,sBAAK5H,UAAWkC,IAAI2F,gBAApB,UACE,oBAAI7H,UAAWkC,IAAI4F,cAAnB,SACE,cAAC,IAAD,CAAkBxF,GAAG,gCAEvB,cAAC,KAAD,CACEA,GAAG,wBACHmF,QAASA,EACTE,gBAAiBA,EACjBI,YAAY,QCILC,GApBQ,SAAAjI,GACrB,IAAQkI,EAA+BlI,EAA/BkI,QAASC,EAAsBnI,EAAtBmI,kBAEXC,EACJ,oBAAInI,UAAWkC,IAAIkG,UAAnB,SACE,cAAC,IAAD,CAAkB9F,GAAG,+BAIzB,OACE,sBAAKtC,UAAWkC,IAAImG,eAApB,UACE,oBAAIrI,UAAWkC,IAAIoG,eAAnB,SACE,cAAC,IAAD,CAAkBhG,GAAG,6BAA6BsB,OAAQ,CAAEC,MAAOoE,EAAQ5E,YAE5E6E,EAAoBC,EAAe,KACpC,cAAC,KAAD,CAASF,QAASA,Q,SCiCTM,GA/CU,SAAAxI,GACvB,IACE+C,EAWE/C,EAXF+C,MACA1B,EAUErB,EAVFqB,QACAoH,EASEzI,EATFyI,kBACA3C,EAQE9F,EARF8F,cACA4C,EAOE1I,EAPF0I,mBACAC,EAME3I,EANF2I,oBACAC,EAKE5I,EALF4I,iBACAC,EAIE7I,EAJF6I,sBACAC,EAGE9I,EAHF8I,gBACAC,EAEE/I,EAFF+I,YACA5F,EACEnD,EADFmD,yBAGF,OAAK9B,EAAQuF,OAKX,sBAAKrE,GAAG,OAAOtC,UAAWkC,IAAI6G,YAA9B,UACE,oBAAI/I,UAAWkC,IAAI8G,gBAAnB,SACE,cAAC,IAAD,CAAkB1G,GAAG,kCAEvB,cAAC,KAAD,CAAUyC,KAAM3D,EAAQuF,OAAQmC,YAAaA,EAAajD,cAAeA,IACzE,cAAC,KAAD,CACEvD,GAAG,sBACH2G,iBAAkB/G,IAAIgH,oBACtBvE,OAAQ8D,EACR7D,QAAS8D,EACT7D,WAAS,EACT3B,yBAA0BA,EAN5B,SAQE,cAAC,KAAD,CACElD,UAAWkC,IAAIiH,YACfC,6BAA8BlH,IAAImH,2BAClCC,aAAcxG,EACd0F,kBAAmBA,EACnBG,iBAAkBA,EAClBY,SAAUV,EACVW,WAAYZ,SAxBX,M,qBChBLa,GAAoB,SAAA1J,GACxB,IAAQC,EAAyCD,EAAzCC,UAAWiE,EAA8BlE,EAA9BkE,cAAeyD,EAAe3H,EAAf2H,WAC5BgC,EAAUzH,IAAWgC,GAAiB/B,KAAIyH,KAAM3J,GACtD,OAAO0H,GAAcA,EAAWkC,MAC9B,sBAAK5J,UAAW0J,EAAhB,UACE,oBAAI1J,UAAWkC,KAAIY,MAAnB,SACE,cAAC,IAAD,CAAkBR,GAAG,6BAEvB,mBAAGtC,UAAWkC,KAAI0H,MAAlB,SAA0BlC,EAAWkC,WAErC,MAGNH,GAAkB1I,aAAe,CAAEf,UAAW,KAAMiE,cAAe,MAUpDwF,U,SCnBTI,G,kCACJ,WAAY9J,GAAQ,IAAD,sBACjB,cAAMA,IACDuB,MAAQ,CAAEwI,UAAU,GAFR,E,kCAKnB,WAAU,IAAD,OACP,EAAyEC,KAAKhK,MAAtEC,EAAR,EAAQA,UAAWiE,EAAnB,EAAmBA,cAAe+F,EAAlC,EAAkCA,YAAatC,EAA/C,EAA+CA,WAAYuC,EAA3D,EAA2DA,UAE3D,IAAKD,EACH,OAAO,KAGT,IAAME,EAAUxC,GAAcA,EAAWyC,SAAWzC,EAAWyC,SAASD,QAAU,GAC5ER,EAAUzH,IAAWgC,GAAiB/B,IAAIkI,WAAYpK,GACtDqK,EAAWJ,EAAS,UAAMA,EAAUK,KAAhB,YAAwBN,EAAYO,IAApC,YAA2CP,EAAYQ,KAAQ,KAEnFC,EAAW1E,IAAO2E,KAAKC,MAAMC,QAC/B,CAAEC,iBAAkBC,aAAsBd,EAAaK,IACvD,CAAEH,UAASa,OAAQf,GACjBgB,EAAM,cAAC,KAAD,WAASP,GAAT,IAAmBQ,aAAclB,KAAKzI,MAAMwI,YAExD,OACE,sBAAK9J,UAAW0J,EAAhB,UACE,oBAAI1J,UAAWkC,IAAIgJ,cAAnB,SACE,cAAC,IAAD,CAAkB5I,GAAG,gCAEtByH,KAAKzI,MAAMwI,SACV,wBACE9J,UAAWkC,IAAI8I,IACfzH,QAAS,WACP,EAAK4H,SAAS,CAAErB,UAAU,KAH9B,SAMGkB,IAGH,qBAAKhL,UAAWkC,IAAI8I,IAApB,SAA0BA,W,GArCNI,aA4C9BvB,GAAgB9I,aAAe,CAC7BkD,cAAe,KACfjE,UAAW,KACXgK,YAAa,KACbC,UAAW,MAUEJ,U,oBCZPwB,GAASC,IAATD,KAeFE,GAAgB,SAACC,EAAYC,GACjC,IAAMC,EAAMF,EAAWG,MAAK,SAAAC,GAAC,OAAIA,EAAEH,MAAQA,KAC3C,OAAOC,EAAMA,EAAIG,MAAQJ,GAGdK,GAAb,kCACE,WAAY/L,GAAQ,IAAD,cACjB,cAAMA,GACN,IAAQgM,EAAyChM,EAAzCgM,6BAA8BtJ,EAAW1C,EAAX0C,OAFrB,OAGjB,EAAKnB,MAAQ,CACX0K,eAAgB,GAChBhJ,mBAAmB,EACnBiJ,iBAAkBF,IAAiCtJ,EAAOH,IAG5D,EAAK4J,aAAe,EAAKA,aAAaC,KAAlB,QACpB,EAAKtG,cAAgB,EAAKA,cAAcsG,KAAnB,QACrB,EAAKtD,gBAAkB,EAAKA,gBAAgBsD,KAArB,QAXN,EADrB,wCAeE,SAAavI,GACX,MAMImG,KAAKhK,MALPqM,EADF,EACEA,QACAC,EAFF,EAEEA,WACA5J,EAHF,EAGEA,OACA6J,EAJF,EAIEA,qBACAC,EALF,EAKEA,4BAGInL,EAAUiL,EADE,IAAIhB,GAAK5I,EAAOH,KAG1BkK,EAAiC5I,EAAjC4I,aAEFC,EAAgB,CACpBrL,UACAsL,YAJF,IAAyC9I,EAAzC,IAKE4I,aAAc,CACZG,aAAcH,EAAaI,UAC3BC,WAAYL,EAAaM,SAE3BC,oBAAqB,MAGjBC,GAAwBjD,KAAKhK,MAAM+I,YAEnCmE,EAASC,cAIfZ,EAF6Ba,YAAqB,eAAgBF,GAA1DG,iBAE+BX,EAAeO,GAGtDT,IAGAH,EAAQiB,KACNC,YACE,eACAL,EACA,CAAE3K,GAAIlB,EAAQkB,GAAGgI,KAAMiD,KAAMC,YAAWpM,EAAQG,WAAWuB,QAC3D,OAvDR,2BA4DE,WACE,MAAyEiH,KAAKhK,MAAtE+I,EAAR,EAAQA,YAAasD,EAArB,EAAqBA,QAASE,EAA9B,EAA8BA,qBAAsB7J,EAApD,EAAoDA,OAAQ0H,EAA5D,EAA4DA,SAE5D,GAAKrB,EAUHiB,KAAKoB,SAAS,CAAEc,kBAAkB,QAVlB,CAChB,IAAM3K,EAAQ,CAAEmM,KAAK,GAAD,OAAKtD,EAASuD,UAAd,OAAyBvD,EAASwD,QAAlC,OAA2CxD,EAASjF,OAIxEoH,EAAqBc,IAAkB,CAAErB,6BAA8BtJ,EAAOH,KAG9E8J,EAAQiB,KAAKC,YAA4B,aAAcJ,cAAsB,GAAI,IAAK5L,MAvE5F,6BA6EE,SAAgBsC,GAAS,IAAD,OACtB,EAA2CmG,KAAKhK,MAAxCqM,EAAR,EAAQA,QAAS3J,EAAjB,EAAiBA,OAAQmL,EAAzB,EAAyBA,cACnBX,EAASC,cAIfU,EAHkB,IAAIvC,GAAK5I,EAAOH,IACdsB,EAAZ7B,QAEyB8L,QAC9BC,MAAK,SAAAC,GACJ,EAAK5C,SAAS,CAAEc,kBAAkB,IAGlCG,EAAQiB,KACNC,YAA4B,mBAAoBL,EAAQ,CAAE3K,GAAIyL,EAAKzD,MAAQ,QAG9E0D,OAAM,iBA5Fb,oBAiGE,WAAU,IAAD,OACP,EAuBIjE,KAAKhK,MAtBP+F,EADF,EACEA,SACAmI,EAFF,EAEEA,gBACAnF,EAHF,EAGEA,YACAuD,EAJF,EAIEA,WACA6B,EALF,EAKEA,cACAC,EANF,EAMEA,KACAjL,EAPF,EAOEA,yBACQkL,EARV,EAQE3L,OACA0H,EATF,EASEA,SACAkE,EAVF,EAUEA,kBACAC,EAXF,EAWEA,iBACArG,EAZF,EAYEA,QACAC,EAbF,EAaEA,kBACAU,EAdF,EAcEA,sBACAD,EAfF,EAeEA,iBACA4F,EAhBF,EAgBEA,UACAC,EAjBF,EAiBEA,oBACAC,EAlBF,EAkBEA,aACAC,EAnBF,EAmBEA,4BACAC,EApBF,EAoBEA,UACAC,EArBF,EAqBEA,yBACAC,EAtBF,EAsBEA,oBAGI5E,EAAY,IAAIoB,GAAK+C,EAAU9L,IAC/BwM,EAA2BV,EAAUW,UAAYC,IACjDC,EAAiBb,EAAUW,UAAYG,IACvCC,EACJL,GAA4BG,EACxBG,YAAiBlB,EAAcjE,IAC/BoF,YAAchD,EAAWpC,IAEzBqF,EAAclB,EAAUb,MAAQC,YAAW2B,EAAe5N,WAAWuB,OAAS,IAC9EL,EAAM,KAAK8K,KAAM+B,GAAgBlB,GAEjCmB,EAAcN,EAChBO,IACAC,IACEC,EAAaT,EAAiB,SAAW,cAEzCU,EACJR,EAAe7M,IAAM6M,EAAe5N,WAAWD,QAAUG,IAErDmO,EAAoBd,GAA4Ba,EAOhDE,GACHf,GAA4BG,IAC7BX,GAC4B,MAA5BA,EAAiBwB,OAGnB,GAFoCF,GAAqBC,EAGvD,OAAO,cAAC,KAAD,CAAerN,KAAK,cAAcC,OAAQA,EAAQkL,OAAQxD,EAASwD,SAG5E,MAMIwB,EAAe5N,WANnB,IACE0F,mBADF,MACgB,GADhB,OAEE+C,oBAFF,OAEgB,KAFhB,QAGE+F,cAHF,OAGU,KAHV,QAIEjN,cAJF,OAIU,GAJV,GAKE4E,GALF,EAKEA,WAGIjC,GACJ,+BACG2B,YAAStE,GAAO,CACfuE,kBAhMiC,GAiMjCC,cAAepF,IAAIqF,aAKnByI,GACJ,cAAC,IAAD,CAAkB1N,GAAG,2BAA2BsB,OAAQ,CAAEd,MAAO2C,MAE7DwK,GAAkB9B,EAAK+B,cAAc,CAAE5N,GAAI,gCAE3C6N,GAAS,cAAC,IAAD,IAEf,GAAI7B,GAAgD,MAA5BA,EAAiBwB,OAGvC,OAAO,cAAC,IAAD,IACF,GAAIxB,EAAkB,CAG3B,IAAM8B,GAAajC,EAAK+B,cAAc,CACpC5N,GAAI,yCAGN,OACE,cAAC,KAAD,CAAMQ,MAAOsN,GAAY/B,kBAAmBA,EAA5C,SACE,eAAC,KAAD,CAAoBrO,UAAWkC,IAAImO,SAAnC,UACE,cAAC,KAAD,UAAsBF,KACtB,cAAC,KAAD,UACE,mBAAGnQ,UAAWkC,IAAIkG,UAAlB,SACE,cAAC,IAAD,CAAkB9F,GAAG,+CAGzB,cAAC,KAAD,UACE,cAAC,IAAD,WAKH,IAAK6M,EAAe7M,GAAI,CAG7B,IAAMgO,GAAenC,EAAK+B,cAAc,CACtC5N,GAAI,oCAGN,OACE,cAAC,KAAD,CAAMQ,MAAOwN,GAAcjC,kBAAmBA,EAA9C,SACE,eAAC,KAAD,CAAoBrO,UAAWkC,IAAImO,SAAnC,UACE,cAAC,KAAD,UAAsBF,KACtB,cAAC,KAAD,UACE,mBAAGnQ,UAAWkC,IAAIqO,YAAlB,SACE,cAAC,IAAD,CAAkBjO,GAAG,0CAGzB,cAAC,KAAD,UACE,cAAC,IAAD,WAOV,IAQMkO,GAAkBrB,GAAkBA,EAAexI,OAEnDxF,MADmC2H,IAAe0H,KAErBrB,EAAexI,OAAOrE,GAAGgI,OAASxB,EAAYxG,GAAGgI,KAC9E1E,GAAkB4K,MAAqB1H,GAAgBA,IAAgB3H,IAEvEsP,GAAgBD,GAAkBrB,EAAexI,OAAS,KAC1D+J,GAAgBC,YAAWF,IAK3BjI,GAAoBoI,YAAwBF,GAAe,IAEjE,GAjRc,SAACX,EAAO5B,GACxB,GAAI4B,GAASA,EAAMc,WAAa9K,IAAO8K,SAAU,CAC/C,IAAMrL,EAAiBsL,YAAY3C,EAAM4B,GACzC,MAAO,CAAEvK,iBAAgBD,WAAYC,GAChC,OAAIuK,EACF,CACLvK,eAAe,IAAD,OAAMuK,EAAMc,SAAZ,KACdtL,WAAW,yBAAD,OAA2BwK,EAAMc,SAAjC,MAGP,GAuQkCE,CAAUhB,GAAO5B,GAAhD3I,GAAR,GAAQA,eAAgBD,GAAxB,GAAwBA,WAWlByL,GAAgB,SAAC5P,EAAS6P,GAAV,OACnB7P,EAAQgC,QAAU,IAChB4H,KAAI,SAAA5G,GACH,IAAMC,EAAWD,EAAM7C,WAAW8C,SAC5B0K,EAAU1K,EAAWA,EAAS4M,GAAe,KAI7CC,EAAQ9M,EAAM7C,WAAW2P,MACzBC,EAAOD,EAAQA,EAAMvF,MAAK,SAAAyF,GAAC,OAAIA,EAAE5O,OAASyO,KAAe,KAE/D,OAAOlC,GAAWoC,KAEnBE,QAAO,SAAAtC,GAAO,OAAe,MAAXA,MAEjBuC,GAAiBN,GAAc7B,EAAgB,YAC/CoC,GAAgBP,GAAc7B,EAAgB,WAC9CqC,GAAeC,KAAKC,UAAUJ,GAAetG,KAAI,SAAA2G,GAAG,OAAIA,EAAIC,QAC5DC,GAAY9L,IAAO8L,UACnBC,GAAc3D,EAAK+B,cACvB,CAAE5N,GAAI,2BACN,CAAEQ,SAAOiN,MAAOvK,GAAgBqM,eAG5BlM,GACJ,cAAC,KAAD,CACE3F,UAAWkC,IAAI6P,eACfvP,KAAK,cACLC,OAAQA,EACRwC,GAAI,CAAEC,KAAM,SAJd,SAMGsD,KAICwJ,GAAiBC,YAA2B,YAAaxD,GACzDyD,GAAkBD,YAA2B,WAAYxD,GACzD/I,GACJgC,IAAcA,GAAWhC,SACvB,iCACG6F,GAAc2G,GAAiBxK,GAAWhC,UAC3C,sBAAM1F,UAAWkC,IAAI2E,UAArB,uBAEA,KAEN,OACE,cAAC,KAAD,CACE/D,MAAOgP,GACPzD,kBAAmBA,EACnB1H,OAAQ6B,GACR2J,YAAY,UACZlL,YAAaA,EACbqK,eAAgBA,GAChBC,cAAeA,GACfa,OAAQ,CACN,WAAY,oBACZ,QAAS,WACTnL,YAAaA,EACbzE,KAAMsP,GACN1N,MAAOoN,IAbX,SAgBE,eAAC,KAAD,CAAoBxR,UAAWkC,IAAImO,SAAnC,UACE,cAAC,KAAD,UAAsBF,KACtB,cAAC,KAAD,UACE,gCACE,cAAC,EAAD,CACErN,MAAOA,GACP1B,QAAS+N,EACThO,aAAcA,GACdE,WAAY,CACViB,GAAI2H,EAAUK,KACdiD,KAAM+B,EACN+C,KAAM9C,EACN+C,IAAK5C,GAEP1M,kBAAmB+G,KAAKzI,MAAM0B,kBAC9BC,qBAAsB,kBAAM,EAAKkI,SAAS,CAAEnI,mBAAmB,KAC/DD,sBA/GkB,SAAAS,GAG5BA,EAAEC,kBACF,EAAK0H,SAAS,CACZnI,mBAAmB,KA2GXE,yBAA0BA,IAE5B,sBAAKlD,UAAWkC,IAAIqQ,iBAApB,UACE,cAAC,EAAD,CAAexN,KAAM0L,GAAehO,OAAQA,IAC5C,sBAAKzC,UAAWkC,IAAIsQ,YAApB,UACE,cAAC,EAAD,CACEjN,WAAYA,GACZC,eAAgBA,GAChBC,UAAWA,GACXC,SAAUA,GACVC,SAAUA,GACVC,gBAAiBA,GACjBC,cAAekE,KAAKlE,gBAEtB,cAAC,GAAD,CAAyBoB,YAAaA,IACtC,cAAC,GAAD,CAAsBQ,QAASuK,GAAgBtK,WAAYA,KAC3D,cAAC,GAAD,CAAmBA,WAAYA,KAC/B,cAAC,GAAD,CACEsC,YAAaA,GACbtC,WAAYA,GACZuC,UAAWkF,EAAe7M,KAE5B,cAAC,GAAD,CAAgB2F,QAASA,EAASC,kBAAmBA,IACrD,cAAC,GAAD,CACEpF,MAAOA,GACP1B,QAAS+N,EACT3G,kBAAmBA,GACnB3C,cAAekE,KAAKlE,cACpB4C,mBAAoBwF,GAAmBlE,KAAKzI,MAAM2K,iBAClDvD,oBAAqB,kBAAM,EAAKyC,SAAS,CAAEc,kBAAkB,KAC7DtD,iBAAkBA,EAClBC,sBAAuBA,EACvBC,gBAAiBkB,KAAKlB,gBACtBC,YAAaA,EACb5F,yBAA0BA,OAG9B,cAAC,IAAD,CACElD,UAAWkC,IAAIuQ,aACfrR,QAAS+N,EACThO,aAAcA,GACd2E,SAAUA,EACVyD,SAlIc,SAAA3F,GAC1B,IAAM8O,EAAoBvD,EAAe5N,WAAWD,QAAUK,IAC1DR,IAAgBuR,EAClBC,OAAOC,SAAS,EAAG,GAEnB,EAAK1G,aAAatI,IA8HRd,MAAOkN,GACP6C,SAAU5C,GACVzH,kBAAmBA,GACnBtF,yBAA0BA,EAC1BqL,UAAWA,EACXC,oBAAqBA,EACrBE,4BAA6BA,EAC7BC,UAAWA,EACXC,yBAA0BA,EAC1BC,oBAAqBA,YAK7B,cAAC,KAAD,UACE,cAAC,IAAD,eAnZZ,GAA0CzD,aA2Z1CU,GAAqB/K,aAAe,CAClC+E,SAAUC,IAAOC,gBACjB8C,YAAa,KACbiD,6BAA8B,KAC9BuC,iBAAkB,KAClBrG,QAAS,GACTC,kBAAmB,KACnBqG,UAAW,KACXC,oBAAqB,KACrB7F,iBAAkB,KAClB8F,aAAc1I,IAAO+M,OAAOC,QAC5BpE,UAAW,KACXE,oBAAqB,MA8CvB,IAkEMmE,GAAcC,kBAClBC,aACAC,mBApEsB,SAAA7R,GACtB,IAAQ2M,EAAoB3M,EAAM8R,KAA1BnF,gBACR,EAYI3M,EAAM0R,YAXR1E,EADF,EACEA,iBACArG,EAFF,EAEEA,QACAC,EAHF,EAGEA,kBACAqG,EAJF,EAIEA,UACAC,EALF,EAKEA,oBACA5F,EANF,EAMEA,sBACAD,EAPF,EAOEA,iBACAgG,EARF,EAQEA,UACAC,EATF,EASEA,yBACAC,EAVF,EAUEA,oBACA9C,EAXF,EAWEA,6BAgBF,MAAO,CACLkC,kBACAnF,YAhBsBxH,EAAMyD,KAAtB+D,YAiBNuD,WAfiB,SAAA/J,GACjB,IAAM+Q,EAAM,CAAE/Q,KAAI+P,KAAM,WAClBiB,EAAWC,YAAuBjS,EAAO,CAAC+R,IAChD,OAA2B,IAApBC,EAASjQ,OAAeiQ,EAAS,GAAK,MAa7CpF,cAVoB,SAAA5L,GACpB,IAAM+Q,EAAM,CAAE/Q,KAAI+P,KAAM,cAClBiB,EAAWC,YAAuBjS,EAAO,CAAC+R,IAChD,OAA2B,IAApBC,EAASjQ,OAAeiQ,EAAS,GAAK,MAQ7CjF,kBAAmBmF,YAAoBlS,GACvCyK,+BACAuC,mBACArG,UACAC,oBACAqG,YACAC,sBACAG,YACAC,2BACAC,sBACAjG,wBACAD,uBAIuB,SAAA8K,GAAQ,MAAK,CACtCvQ,yBAA0B,SAACwQ,EAAaC,GAAd,OACxBF,EAASG,YAAuBF,EAAaC,KAC/CrH,qBAAsB,SAACc,EAAkBxJ,EAAQoJ,GAA3B,OACpByG,EAASrG,EAAiBxJ,EAAQoJ,KACpC0B,4BAA6B,SAAChC,EAAazC,EAAW9I,GAAzB,OAC3BsS,EAASI,YAA0BnH,EAAazC,EAAW9I,KAC7DyM,cAAe,SAAC3D,EAAWlI,GAAZ,OAAwB0R,EAASK,YAAY7J,EAAWlI,KACvEwK,4BAA6B,kBAAMkH,EAASM,oBAe5CC,IANkBf,CAOlBnH,IAEakH,c,oBC5mBfiB,EAAOC,QAAU,CAAC,KAAO,0BAA0B,SAAW,8BAA8B,YAAc,iCAAiC,UAAY,+BAA+B,cAAgB,mCAAmC,kBAAoB,uCAAuC,cAAgB,mCAAmC,UAAY,+BAA+B,eAAiB,oCAAoC,8BAAgC,mDAAmD,kBAAoB,uCAAuC,gBAAkB,qCAAqC,SAAW,8BAA8B,aAAe,kCAAkC,WAAa,gCAAgC,yBAA2B,8CAA8C,uBAAyB,4CAA4C,iBAAmB,sCAAsC,YAAc,iCAAiC,aAAe,kCAAkC,cAAgB,mCAAmC,aAAe,kCAAkC,cAAgB,mCAAmC,eAAiB,oCAAoC,sBAAwB,2CAA2C,kBAAoB,uCAAuC,eAAiB,oCAAoC,QAAU,6BAA6B,MAAQ,2BAA2B,OAAS,4BAA4B,eAAiB,oCAAoC,eAAiB,oCAAoC,UAAY,+BAA+B,YAAc,iCAAiC,mBAAqB,wCAAwC,iBAAmB,sCAAsC,gBAAkB,qCAAqC,cAAgB,mCAAmC,YAAc,iCAAiC,WAAa,gCAAgC,cAAgB,mCAAmC,eAAiB,oCAAoC,eAAiB,oCAAoC,YAAc,iCAAiC,gBAAkB,qCAAqC,oBAAsB,yCAAyC,YAAc,iCAAiC,2BAA6B,gDAAgD,IAAM,yBAAyB,SAAW,gC,oBCAhgFD,EAAOC,QAAU,CAAC,KAAO,gCAAgC,MAAQ,iCAAiC,MAAQ","file":"ListingPage.ed8ce49d.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst EditIcon = props => {\n  const { className } = props;\n  return (\n    <svg\n      className={className}\n      width=\"16px\"\n      height=\"16px\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g\n        stroke=\"none\"\n        strokeWidth=\"1\"\n        fill=\"none\"\n        fillRule=\"evenodd\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <g transform=\"translate(-255.000000, -76.000000)\" stroke=\"#FFFFFF\">\n          <g transform=\"translate(0.000000, 60.000000)\">\n            <g transform=\"translate(256.000000, 16.000000)\">\n              <polygon points=\"5.1611 12.8804 0.2121 15.0004 2.3331 10.0504 11.1721 1.2124 14.0001 4.0404\" />\n              <path d=\"M12.1641,5.876 L9.3361,3.048\" />\n              <path d=\"M5.1611,12.8804 L2.3331,10.0504\" />\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nEditIcon.defaultProps = { className: null };\n\nconst { string } = PropTypes;\n\nEditIcon.propTypes = { className: string };\n\nexport default EditIcon;\n","import React from 'react';\nimport { bool, oneOfType, object } from 'prop-types';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport classNames from 'classnames';\nimport {\n  LISTING_STATE_PENDING_APPROVAL,\n  LISTING_STATE_CLOSED,\n  LISTING_STATE_DRAFT,\n  propTypes,\n} from '../../util/types';\nimport { NamedLink } from '../../components';\nimport EditIcon from './EditIcon';\n\nimport css from './ListingPage.module.css';\n\nexport const ActionBarMaybe = props => {\n  const { isOwnListing, listing, editParams } = props;\n  const state = listing.attributes.state;\n  const isPendingApproval = state === LISTING_STATE_PENDING_APPROVAL;\n  const isClosed = state === LISTING_STATE_CLOSED;\n  const isDraft = state === LISTING_STATE_DRAFT;\n\n  if (isOwnListing) {\n    let ownListingTextTranslationId = 'ListingPage.ownListing';\n\n    if (isPendingApproval) {\n      ownListingTextTranslationId = 'ListingPage.ownListingPendingApproval';\n    } else if (isClosed) {\n      ownListingTextTranslationId = 'ListingPage.ownClosedListing';\n    } else if (isDraft) {\n      ownListingTextTranslationId = 'ListingPage.ownListingDraft';\n    }\n\n    const message = isDraft ? 'ListingPage.finishListing' : 'ListingPage.editListing';\n\n    const ownListingTextClasses = classNames(css.ownListingText, {\n      [css.ownListingTextPendingApproval]: isPendingApproval,\n    });\n\n    return (\n      <div className={css.actionBar}>\n        <p className={ownListingTextClasses}>\n          <FormattedMessage id={ownListingTextTranslationId} />\n        </p>\n        <NamedLink className={css.editListingLink} name=\"EditListingPage\" params={editParams}>\n          <EditIcon className={css.editIcon} />\n          <FormattedMessage id={message} />\n        </NamedLink>\n      </div>\n    );\n  } else if (isClosed) {\n    return (\n      <div className={css.actionBar}>\n        <p className={css.closedListingText}>\n          <FormattedMessage id=\"ListingPage.closedListing\" />\n        </p>\n      </div>\n    );\n  }\n  return null;\n};\n\nActionBarMaybe.propTypes = {\n  isOwnListing: bool.isRequired,\n  listing: oneOfType([propTypes.listing, propTypes.ownListing]).isRequired,\n  editParams: object.isRequired,\n};\n\nActionBarMaybe.displayName = 'ActionBarMaybe';\n\nexport default ActionBarMaybe;\n","import React from 'react';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport { ResponsiveImage, Modal, ImageCarousel } from '../../components';\nimport ActionBarMaybe from './ActionBarMaybe';\n\nimport css from './ListingPage.module.css';\n\nconst SectionImages = props => {\n  const {\n    title,\n    listing,\n    isOwnListing,\n    editParams,\n    handleViewPhotosClick,\n    imageCarouselOpen,\n    onImageCarouselClose,\n    onManageDisableScrolling,\n  } = props;\n\n  const hasImages = listing.images && listing.images.length > 0;\n  const firstImage = hasImages ? listing.images[0] : null;\n\n  // Action bar is wrapped with a div that prevents the click events\n  // to the parent that would otherwise open the image carousel\n  const actionBar = listing.id ? (\n    <div onClick={e => e.stopPropagation()}>\n      <ActionBarMaybe isOwnListing={isOwnListing} listing={listing} editParams={editParams} />\n    </div>\n  ) : null;\n\n  const viewPhotosButton = hasImages ? (\n    <button className={css.viewPhotos} onClick={handleViewPhotosClick}>\n      <FormattedMessage\n        id=\"ListingPage.viewImagesButton\"\n        values={{ count: listing.images.length }}\n      />\n    </button>\n  ) : null;\n\n  return (\n    <div className={css.sectionImages}>\n      <div className={css.threeToTwoWrapper}>\n        <div className={css.aspectWrapper} onClick={handleViewPhotosClick}>\n          {actionBar}\n          <ResponsiveImage\n            rootClassName={css.rootForImage}\n            alt={title}\n            image={firstImage}\n            variants={[\n              'landscape-crop',\n              'landscape-crop2x',\n              'landscape-crop4x',\n              'landscape-crop6x',\n            ]}\n          />\n          {viewPhotosButton}\n        </div>\n      </div>\n      <Modal\n        id=\"ListingPage.imageCarousel\"\n        scrollLayerClassName={css.carouselModalScrollLayer}\n        containerClassName={css.carouselModalContainer}\n        lightCloseButton\n        isOpen={imageCarouselOpen}\n        onClose={onImageCarouselClose}\n        usePortal\n        onManageDisableScrolling={onManageDisableScrolling}\n      >\n        <ImageCarousel images={listing.images} />\n      </Modal>\n    </div>\n  );\n};\n\nexport default SectionImages;\n","import React from 'react';\nimport { NamedLink, AvatarLarge, AvatarMedium } from '../../components';\n\nimport css from './ListingPage.module.css';\n\nconst SectionAvatar = props => {\n  const { user, params } = props;\n  return (\n    <div className={css.sectionAvatar}>\n      <NamedLink name=\"ListingPage\" params={params} to={{ hash: '#host' }}>\n        <AvatarLarge user={user} className={css.avatarDesktop} disableProfileLink />\n      </NamedLink>\n      <NamedLink name=\"ListingPage\" params={params} to={{ hash: '#host' }}>\n        <AvatarMedium user={user} className={css.avatarMobile} disableProfileLink />\n      </NamedLink>\n    </div>\n  );\n};\n\nexport default SectionAvatar;\n","import React from 'react';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport { InlineTextButton } from '../../components';\nimport { LINE_ITEM_NIGHT, LINE_ITEM_DAY } from '../../util/types';\nimport config from '../../config';\n\nimport css from './ListingPage.module.css';\n\nconst SectionHeading = props => {\n  const {\n    priceTitle,\n    formattedPrice,\n    richTitle,\n    category,\n    hostLink,\n    showContactUser,\n    onContactUser,\n  } = props;\n\n  const unitType = config.bookingUnitType;\n  const isNightly = unitType === LINE_ITEM_NIGHT;\n  const isDaily = unitType === LINE_ITEM_DAY;\n\n  const unitTranslationKey = isNightly\n    ? 'ListingPage.perNight'\n    : isDaily\n    ? 'ListingPage.perDay'\n    : 'ListingPage.perUnit';\n\n  return (\n    <div className={css.sectionHeading}>\n      <div className={css.desktopPriceContainer}>\n        <div className={css.desktopPriceValue} title={priceTitle}>\n          {formattedPrice}\n        </div>\n        <div className={css.desktopPerUnit}>\n          <FormattedMessage id={unitTranslationKey} />\n        </div>\n      </div>\n      <div className={css.heading}>\n        <h1 className={css.title}>{richTitle}</h1>\n        <div className={css.author}>\n          {category}\n          <FormattedMessage id=\"ListingPage.hostedBy\" values={{ name: hostLink }} />\n          {showContactUser ? (\n            <span className={css.contactWrapper}>\n              <span className={css.separator}>•</span>\n              <InlineTextButton\n                rootClassName={css.contactLink}\n                onClick={onContactUser}\n                enforcePagePreloadFor=\"SignupPage\"\n              >\n                <FormattedMessage id=\"ListingPage.contactUser\" />\n              </InlineTextButton>\n            </span>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SectionHeading;\n","import React from 'react';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport { richText } from '../../util/richText';\n\nimport css from './ListingPage.module.css';\n\nconst MIN_LENGTH_FOR_LONG_WORDS_IN_DESCRIPTION = 20;\n\nconst SectionDescriptionMaybe = props => {\n  const { description } = props;\n  return description ? (\n    <div className={css.sectionDescription}>\n      <h2 className={css.descriptionTitle}>\n        <FormattedMessage id=\"ListingPage.descriptionTitle\" />\n      </h2>\n      <p className={css.description}>\n        {richText(description, {\n          longWordMinLength: MIN_LENGTH_FOR_LONG_WORDS_IN_DESCRIPTION,\n          longWordClass: css.longWord,\n        })}\n      </p>\n    </div>\n  ) : null;\n};\n\nexport default SectionDescriptionMaybe;\n","import React from 'react';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport { PropertyGroup } from '../../components';\n\nimport css from './ListingPage.module.css';\n\nconst SectionFeaturesMaybe = props => {\n  const { options, publicData } = props;\n  if (!publicData) {\n    return null;\n  }\n\n  const selectedOptions = publicData && publicData.amenities ? publicData.amenities : [];\n  return (\n    <div className={css.sectionFeatures}>\n      <h2 className={css.featuresTitle}>\n        <FormattedMessage id=\"ListingPage.featuresTitle\" />\n      </h2>\n      <PropertyGroup\n        id=\"ListingPage.amenities\"\n        options={options}\n        selectedOptions={selectedOptions}\n        twoColumns={true}\n      />\n    </div>\n  );\n};\n\nexport default SectionFeaturesMaybe;\n","import React from 'react';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport { Reviews } from '../../components';\n\nimport css from './ListingPage.module.css';\n\nconst SectionReviews = props => {\n  const { reviews, fetchReviewsError } = props;\n\n  const reviewsError = (\n    <h2 className={css.errorText}>\n      <FormattedMessage id=\"ListingPage.reviewsError\" />\n    </h2>\n  );\n\n  return (\n    <div className={css.sectionReviews}>\n      <h2 className={css.reviewsHeading}>\n        <FormattedMessage id=\"ListingPage.reviewsHeading\" values={{ count: reviews.length }} />\n      </h2>\n      {fetchReviewsError ? reviewsError : null}\n      <Reviews reviews={reviews} />\n    </div>\n  );\n};\n\nexport default SectionReviews;\n","import React from 'react';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport { UserCard, Modal } from '../../components';\nimport { EnquiryForm } from '../../forms';\n\nimport css from './ListingPage.module.css';\n\nconst SectionHostMaybe = props => {\n  const {\n    title,\n    listing,\n    authorDisplayName,\n    onContactUser,\n    isEnquiryModalOpen,\n    onCloseEnquiryModal,\n    sendEnquiryError,\n    sendEnquiryInProgress,\n    onSubmitEnquiry,\n    currentUser,\n    onManageDisableScrolling,\n  } = props;\n\n  if (!listing.author) {\n    return null;\n  }\n\n  return (\n    <div id=\"host\" className={css.sectionHost}>\n      <h2 className={css.yourHostHeading}>\n        <FormattedMessage id=\"ListingPage.yourHostHeading\" />\n      </h2>\n      <UserCard user={listing.author} currentUser={currentUser} onContactUser={onContactUser} />\n      <Modal\n        id=\"ListingPage.enquiry\"\n        contentClassName={css.enquiryModalContent}\n        isOpen={isEnquiryModalOpen}\n        onClose={onCloseEnquiryModal}\n        usePortal\n        onManageDisableScrolling={onManageDisableScrolling}\n      >\n        <EnquiryForm\n          className={css.enquiryForm}\n          submitButtonWrapperClassName={css.enquirySubmitButtonWrapper}\n          listingTitle={title}\n          authorDisplayName={authorDisplayName}\n          sendEnquiryError={sendEnquiryError}\n          onSubmit={onSubmitEnquiry}\n          inProgress={sendEnquiryInProgress}\n        />\n      </Modal>\n    </div>\n  );\n};\n\nexport default SectionHostMaybe;\n","import React from 'react';\nimport { shape, string } from 'prop-types';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport classNames from 'classnames';\n\nimport css from './SectionRulesMaybe.module.css';\n\nconst SectionRulesMaybe = props => {\n  const { className, rootClassName, publicData } = props;\n  const classes = classNames(rootClassName || css.root, className);\n  return publicData && publicData.rules ? (\n    <div className={classes}>\n      <h2 className={css.title}>\n        <FormattedMessage id=\"ListingPage.rulesTitle\" />\n      </h2>\n      <p className={css.rules}>{publicData.rules}</p>\n    </div>\n  ) : null;\n};\n\nSectionRulesMaybe.defaultProps = { className: null, rootClassName: null };\n\nSectionRulesMaybe.propTypes = {\n  className: string,\n  rootClassName: string,\n  publicData: shape({\n    rules: string,\n  }),\n};\n\nexport default SectionRulesMaybe;\n","import React, { Component } from 'react';\nimport { string } from 'prop-types';\nimport { FormattedMessage } from '../../util/reactIntl';\nimport classNames from 'classnames';\nimport { propTypes } from '../../util/types';\nimport { obfuscatedCoordinates } from '../../util/maps';\nimport { Map } from '../../components';\nimport config from '../../config';\n\nimport css from './ListingPage.module.css';\n\nclass SectionMapMaybe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { isStatic: true };\n  }\n\n  render() {\n    const { className, rootClassName, geolocation, publicData, listingId } = this.props;\n\n    if (!geolocation) {\n      return null;\n    }\n\n    const address = publicData && publicData.location ? publicData.location.address : '';\n    const classes = classNames(rootClassName || css.sectionMap, className);\n    const cacheKey = listingId ? `${listingId.uuid}_${geolocation.lat}_${geolocation.lng}` : null;\n\n    const mapProps = config.maps.fuzzy.enabled\n      ? { obfuscatedCenter: obfuscatedCoordinates(geolocation, cacheKey) }\n      : { address, center: geolocation };\n    const map = <Map {...mapProps} useStaticMap={this.state.isStatic} />;\n\n    return (\n      <div className={classes}>\n        <h2 className={css.locationTitle}>\n          <FormattedMessage id=\"ListingPage.locationTitle\" />\n        </h2>\n        {this.state.isStatic ? (\n          <button\n            className={css.map}\n            onClick={() => {\n              this.setState({ isStatic: false });\n            }}\n          >\n            {map}\n          </button>\n        ) : (\n          <div className={css.map}>{map}</div>\n        )}\n      </div>\n    );\n  }\n}\n\nSectionMapMaybe.defaultProps = {\n  rootClassName: null,\n  className: null,\n  geolocation: null,\n  listingId: null,\n};\n\nSectionMapMaybe.propTypes = {\n  rootClassName: string,\n  className: string,\n  geolocation: propTypes.latlng,\n  listingId: propTypes.uuid,\n};\n\nexport default SectionMapMaybe;\n","import React, { Component } from 'react';\nimport { array, arrayOf, bool, func, shape, string, oneOf } from 'prop-types';\nimport { FormattedMessage, intlShape, injectIntl } from '../../util/reactIntl';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport config from '../../config';\nimport routeConfiguration from '../../routeConfiguration';\nimport { findOptionsForSelectFilter } from '../../util/search';\nimport { LISTING_STATE_PENDING_APPROVAL, LISTING_STATE_CLOSED, propTypes } from '../../util/types';\nimport { types as sdkTypes } from '../../util/sdkLoader';\nimport {\n  LISTING_PAGE_DRAFT_VARIANT,\n  LISTING_PAGE_PENDING_APPROVAL_VARIANT,\n  LISTING_PAGE_PARAM_TYPE_DRAFT,\n  LISTING_PAGE_PARAM_TYPE_EDIT,\n  createSlug,\n} from '../../util/urlHelpers';\nimport { formatMoney } from '../../util/currency';\nimport { createResourceLocatorString, findRouteByRouteName } from '../../util/routes';\nimport {\n  ensureListing,\n  ensureOwnListing,\n  ensureUser,\n  userDisplayNameAsString,\n} from '../../util/data';\nimport { richText } from '../../util/richText';\nimport { getMarketplaceEntities } from '../../ducks/marketplaceData.duck';\nimport { manageDisableScrolling, isScrollingDisabled } from '../../ducks/UI.duck';\nimport { initializeCardPaymentData } from '../../ducks/stripe.duck.js';\nimport {\n  Page,\n  NamedLink,\n  NamedRedirect,\n  LayoutSingleColumn,\n  LayoutWrapperTopbar,\n  LayoutWrapperMain,\n  LayoutWrapperFooter,\n  Footer,\n  BookingPanel,\n} from '../../components';\nimport { TopbarContainer, NotFoundPage } from '../../containers';\n\nimport { sendEnquiry, fetchTransactionLineItems, setInitialValues } from './ListingPage.duck';\nimport SectionImages from './SectionImages';\nimport SectionAvatar from './SectionAvatar';\nimport SectionHeading from './SectionHeading';\nimport SectionDescriptionMaybe from './SectionDescriptionMaybe';\nimport SectionFeaturesMaybe from './SectionFeaturesMaybe';\nimport SectionReviews from './SectionReviews';\nimport SectionHostMaybe from './SectionHostMaybe';\nimport SectionRulesMaybe from './SectionRulesMaybe';\nimport SectionMapMaybe from './SectionMapMaybe';\nimport css from './ListingPage.module.css';\n\nconst MIN_LENGTH_FOR_LONG_WORDS_IN_TITLE = 16;\n\nconst { UUID } = sdkTypes;\n\nconst priceData = (price, intl) => {\n  if (price && price.currency === config.currency) {\n    const formattedPrice = formatMoney(intl, price);\n    return { formattedPrice, priceTitle: formattedPrice };\n  } else if (price) {\n    return {\n      formattedPrice: `(${price.currency})`,\n      priceTitle: `Unsupported currency (${price.currency})`,\n    };\n  }\n  return {};\n};\n\nconst categoryLabel = (categories, key) => {\n  const cat = categories.find(c => c.key === key);\n  return cat ? cat.label : key;\n};\n\nexport class ListingPageComponent extends Component {\n  constructor(props) {\n    super(props);\n    const { enquiryModalOpenForListingId, params } = props;\n    this.state = {\n      pageClassNames: [],\n      imageCarouselOpen: false,\n      enquiryModalOpen: enquiryModalOpenForListingId === params.id,\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onContactUser = this.onContactUser.bind(this);\n    this.onSubmitEnquiry = this.onSubmitEnquiry.bind(this);\n  }\n\n  handleSubmit(values) {\n    const {\n      history,\n      getListing,\n      params,\n      callSetInitialValues,\n      onInitializeCardPaymentData,\n    } = this.props;\n    const listingId = new UUID(params.id);\n    const listing = getListing(listingId);\n\n    const { bookingDates, ...bookingData } = values;\n\n    const initialValues = {\n      listing,\n      bookingData,\n      bookingDates: {\n        bookingStart: bookingDates.startDate,\n        bookingEnd: bookingDates.endDate,\n      },\n      confirmPaymentError: null,\n    };\n\n    const saveToSessionStorage = !this.props.currentUser;\n\n    const routes = routeConfiguration();\n    // Customize checkout page state with current listing and selected bookingDates\n    const { setInitialValues } = findRouteByRouteName('CheckoutPage', routes);\n\n    callSetInitialValues(setInitialValues, initialValues, saveToSessionStorage);\n\n    // Clear previous Stripe errors from store if there is any\n    onInitializeCardPaymentData();\n\n    // Redirect to CheckoutPage\n    history.push(\n      createResourceLocatorString(\n        'CheckoutPage',\n        routes,\n        { id: listing.id.uuid, slug: createSlug(listing.attributes.title) },\n        {}\n      )\n    );\n  }\n\n  onContactUser() {\n    const { currentUser, history, callSetInitialValues, params, location } = this.props;\n\n    if (!currentUser) {\n      const state = { from: `${location.pathname}${location.search}${location.hash}` };\n\n      // We need to log in before showing the modal, but first we need to ensure\n      // that modal does open when user is redirected back to this listingpage\n      callSetInitialValues(setInitialValues, { enquiryModalOpenForListingId: params.id });\n\n      // signup and return back to listingPage.\n      history.push(createResourceLocatorString('SignupPage', routeConfiguration(), {}, {}), state);\n    } else {\n      this.setState({ enquiryModalOpen: true });\n    }\n  }\n\n  onSubmitEnquiry(values) {\n    const { history, params, onSendEnquiry } = this.props;\n    const routes = routeConfiguration();\n    const listingId = new UUID(params.id);\n    const { message } = values;\n\n    onSendEnquiry(listingId, message.trim())\n      .then(txId => {\n        this.setState({ enquiryModalOpen: false });\n\n        // Redirect to OrderDetailsPage\n        history.push(\n          createResourceLocatorString('OrderDetailsPage', routes, { id: txId.uuid }, {})\n        );\n      })\n      .catch(() => {\n        // Ignore, error handling in duck file\n      });\n  }\n\n  render() {\n    const {\n      unitType,\n      isAuthenticated,\n      currentUser,\n      getListing,\n      getOwnListing,\n      intl,\n      onManageDisableScrolling,\n      params: rawParams,\n      location,\n      scrollingDisabled,\n      showListingError,\n      reviews,\n      fetchReviewsError,\n      sendEnquiryInProgress,\n      sendEnquiryError,\n      timeSlots,\n      fetchTimeSlotsError,\n      filterConfig,\n      onFetchTransactionLineItems,\n      lineItems,\n      fetchLineItemsInProgress,\n      fetchLineItemsError,\n    } = this.props;\n\n    const listingId = new UUID(rawParams.id);\n    const isPendingApprovalVariant = rawParams.variant === LISTING_PAGE_PENDING_APPROVAL_VARIANT;\n    const isDraftVariant = rawParams.variant === LISTING_PAGE_DRAFT_VARIANT;\n    const currentListing =\n      isPendingApprovalVariant || isDraftVariant\n        ? ensureOwnListing(getOwnListing(listingId))\n        : ensureListing(getListing(listingId));\n\n    const listingSlug = rawParams.slug || createSlug(currentListing.attributes.title || '');\n    const params = { slug: listingSlug, ...rawParams };\n\n    const listingType = isDraftVariant\n      ? LISTING_PAGE_PARAM_TYPE_DRAFT\n      : LISTING_PAGE_PARAM_TYPE_EDIT;\n    const listingTab = isDraftVariant ? 'photos' : 'description';\n\n    const isApproved =\n      currentListing.id && currentListing.attributes.state !== LISTING_STATE_PENDING_APPROVAL;\n\n    const pendingIsApproved = isPendingApprovalVariant && isApproved;\n\n    // If a /pending-approval URL is shared, the UI requires\n    // authentication and attempts to fetch the listing from own\n    // listings. This will fail with 403 Forbidden if the author is\n    // another user. We use this information to try to fetch the\n    // public listing.\n    const pendingOtherUsersListing =\n      (isPendingApprovalVariant || isDraftVariant) &&\n      showListingError &&\n      showListingError.status === 403;\n    const shouldShowPublicListingPage = pendingIsApproved || pendingOtherUsersListing;\n\n    if (shouldShowPublicListingPage) {\n      return <NamedRedirect name=\"ListingPage\" params={params} search={location.search} />;\n    }\n\n    const {\n      description = '',\n      geolocation = null,\n      price = null,\n      title = '',\n      publicData,\n    } = currentListing.attributes;\n\n    const richTitle = (\n      <span>\n        {richText(title, {\n          longWordMinLength: MIN_LENGTH_FOR_LONG_WORDS_IN_TITLE,\n          longWordClass: css.longWord,\n        })}\n      </span>\n    );\n\n    const bookingTitle = (\n      <FormattedMessage id=\"ListingPage.bookingTitle\" values={{ title: richTitle }} />\n    );\n    const bookingSubTitle = intl.formatMessage({ id: 'ListingPage.bookingSubTitle' });\n\n    const topbar = <TopbarContainer />;\n\n    if (showListingError && showListingError.status === 404) {\n      // 404 listing not found\n\n      return <NotFoundPage />;\n    } else if (showListingError) {\n      // Other error in fetching listing\n\n      const errorTitle = intl.formatMessage({\n        id: 'ListingPage.errorLoadingListingTitle',\n      });\n\n      return (\n        <Page title={errorTitle} scrollingDisabled={scrollingDisabled}>\n          <LayoutSingleColumn className={css.pageRoot}>\n            <LayoutWrapperTopbar>{topbar}</LayoutWrapperTopbar>\n            <LayoutWrapperMain>\n              <p className={css.errorText}>\n                <FormattedMessage id=\"ListingPage.errorLoadingListingMessage\" />\n              </p>\n            </LayoutWrapperMain>\n            <LayoutWrapperFooter>\n              <Footer />\n            </LayoutWrapperFooter>\n          </LayoutSingleColumn>\n        </Page>\n      );\n    } else if (!currentListing.id) {\n      // Still loading the listing\n\n      const loadingTitle = intl.formatMessage({\n        id: 'ListingPage.loadingListingTitle',\n      });\n\n      return (\n        <Page title={loadingTitle} scrollingDisabled={scrollingDisabled}>\n          <LayoutSingleColumn className={css.pageRoot}>\n            <LayoutWrapperTopbar>{topbar}</LayoutWrapperTopbar>\n            <LayoutWrapperMain>\n              <p className={css.loadingText}>\n                <FormattedMessage id=\"ListingPage.loadingListingMessage\" />\n              </p>\n            </LayoutWrapperMain>\n            <LayoutWrapperFooter>\n              <Footer />\n            </LayoutWrapperFooter>\n          </LayoutSingleColumn>\n        </Page>\n      );\n    }\n\n    const handleViewPhotosClick = e => {\n      // Stop event from bubbling up to prevent image click handler\n      // trying to open the carousel as well.\n      e.stopPropagation();\n      this.setState({\n        imageCarouselOpen: true,\n      });\n    };\n    const authorAvailable = currentListing && currentListing.author;\n    const userAndListingAuthorAvailable = !!(currentUser && authorAvailable);\n    const isOwnListing =\n      userAndListingAuthorAvailable && currentListing.author.id.uuid === currentUser.id.uuid;\n    const showContactUser = authorAvailable && (!currentUser || (currentUser && !isOwnListing));\n\n    const currentAuthor = authorAvailable ? currentListing.author : null;\n    const ensuredAuthor = ensureUser(currentAuthor);\n\n    // When user is banned or deleted the listing is also deleted.\n    // Because listing can be never showed with banned or deleted user we don't have to provide\n    // banned or deleted display names for the function\n    const authorDisplayName = userDisplayNameAsString(ensuredAuthor, '');\n\n    const { formattedPrice, priceTitle } = priceData(price, intl);\n\n    const handleBookingSubmit = values => {\n      const isCurrentlyClosed = currentListing.attributes.state === LISTING_STATE_CLOSED;\n      if (isOwnListing || isCurrentlyClosed) {\n        window.scrollTo(0, 0);\n      } else {\n        this.handleSubmit(values);\n      }\n    };\n\n    const listingImages = (listing, variantName) =>\n      (listing.images || [])\n        .map(image => {\n          const variants = image.attributes.variants;\n          const variant = variants ? variants[variantName] : null;\n\n          // deprecated\n          // for backwards combatility only\n          const sizes = image.attributes.sizes;\n          const size = sizes ? sizes.find(i => i.name === variantName) : null;\n\n          return variant || size;\n        })\n        .filter(variant => variant != null);\n\n    const facebookImages = listingImages(currentListing, 'facebook');\n    const twitterImages = listingImages(currentListing, 'twitter');\n    const schemaImages = JSON.stringify(facebookImages.map(img => img.url));\n    const siteTitle = config.siteTitle;\n    const schemaTitle = intl.formatMessage(\n      { id: 'ListingPage.schemaTitle' },\n      { title, price: formattedPrice, siteTitle }\n    );\n\n    const hostLink = (\n      <NamedLink\n        className={css.authorNameLink}\n        name=\"ListingPage\"\n        params={params}\n        to={{ hash: '#host' }}\n      >\n        {authorDisplayName}\n      </NamedLink>\n    );\n\n    const amenityOptions = findOptionsForSelectFilter('amenities', filterConfig);\n    const categoryOptions = findOptionsForSelectFilter('category', filterConfig);\n    const category =\n      publicData && publicData.category ? (\n        <span>\n          {categoryLabel(categoryOptions, publicData.category)}\n          <span className={css.separator}>•</span>\n        </span>\n      ) : null;\n\n    return (\n      <Page\n        title={schemaTitle}\n        scrollingDisabled={scrollingDisabled}\n        author={authorDisplayName}\n        contentType=\"website\"\n        description={description}\n        facebookImages={facebookImages}\n        twitterImages={twitterImages}\n        schema={{\n          '@context': 'http://schema.org',\n          '@type': 'ItemPage',\n          description: description,\n          name: schemaTitle,\n          image: schemaImages,\n        }}\n      >\n        <LayoutSingleColumn className={css.pageRoot}>\n          <LayoutWrapperTopbar>{topbar}</LayoutWrapperTopbar>\n          <LayoutWrapperMain>\n            <div>\n              <SectionImages\n                title={title}\n                listing={currentListing}\n                isOwnListing={isOwnListing}\n                editParams={{\n                  id: listingId.uuid,\n                  slug: listingSlug,\n                  type: listingType,\n                  tab: listingTab,\n                }}\n                imageCarouselOpen={this.state.imageCarouselOpen}\n                onImageCarouselClose={() => this.setState({ imageCarouselOpen: false })}\n                handleViewPhotosClick={handleViewPhotosClick}\n                onManageDisableScrolling={onManageDisableScrolling}\n              />\n              <div className={css.contentContainer}>\n                <SectionAvatar user={currentAuthor} params={params} />\n                <div className={css.mainContent}>\n                  <SectionHeading\n                    priceTitle={priceTitle}\n                    formattedPrice={formattedPrice}\n                    richTitle={richTitle}\n                    category={category}\n                    hostLink={hostLink}\n                    showContactUser={showContactUser}\n                    onContactUser={this.onContactUser}\n                  />\n                  <SectionDescriptionMaybe description={description} />\n                  <SectionFeaturesMaybe options={amenityOptions} publicData={publicData} />\n                  <SectionRulesMaybe publicData={publicData} />\n                  <SectionMapMaybe\n                    geolocation={geolocation}\n                    publicData={publicData}\n                    listingId={currentListing.id}\n                  />\n                  <SectionReviews reviews={reviews} fetchReviewsError={fetchReviewsError} />\n                  <SectionHostMaybe\n                    title={title}\n                    listing={currentListing}\n                    authorDisplayName={authorDisplayName}\n                    onContactUser={this.onContactUser}\n                    isEnquiryModalOpen={isAuthenticated && this.state.enquiryModalOpen}\n                    onCloseEnquiryModal={() => this.setState({ enquiryModalOpen: false })}\n                    sendEnquiryError={sendEnquiryError}\n                    sendEnquiryInProgress={sendEnquiryInProgress}\n                    onSubmitEnquiry={this.onSubmitEnquiry}\n                    currentUser={currentUser}\n                    onManageDisableScrolling={onManageDisableScrolling}\n                  />\n                </div>\n                <BookingPanel\n                  className={css.bookingPanel}\n                  listing={currentListing}\n                  isOwnListing={isOwnListing}\n                  unitType={unitType}\n                  onSubmit={handleBookingSubmit}\n                  title={bookingTitle}\n                  subTitle={bookingSubTitle}\n                  authorDisplayName={authorDisplayName}\n                  onManageDisableScrolling={onManageDisableScrolling}\n                  timeSlots={timeSlots}\n                  fetchTimeSlotsError={fetchTimeSlotsError}\n                  onFetchTransactionLineItems={onFetchTransactionLineItems}\n                  lineItems={lineItems}\n                  fetchLineItemsInProgress={fetchLineItemsInProgress}\n                  fetchLineItemsError={fetchLineItemsError}\n                />\n              </div>\n            </div>\n          </LayoutWrapperMain>\n          <LayoutWrapperFooter>\n            <Footer />\n          </LayoutWrapperFooter>\n        </LayoutSingleColumn>\n      </Page>\n    );\n  }\n}\n\nListingPageComponent.defaultProps = {\n  unitType: config.bookingUnitType,\n  currentUser: null,\n  enquiryModalOpenForListingId: null,\n  showListingError: null,\n  reviews: [],\n  fetchReviewsError: null,\n  timeSlots: null,\n  fetchTimeSlotsError: null,\n  sendEnquiryError: null,\n  filterConfig: config.custom.filters,\n  lineItems: null,\n  fetchLineItemsError: null,\n};\n\nListingPageComponent.propTypes = {\n  // from withRouter\n  history: shape({\n    push: func.isRequired,\n  }).isRequired,\n  location: shape({\n    search: string,\n  }).isRequired,\n\n  unitType: propTypes.bookingUnitType,\n  // from injectIntl\n  intl: intlShape.isRequired,\n\n  params: shape({\n    id: string.isRequired,\n    slug: string,\n    variant: oneOf([LISTING_PAGE_DRAFT_VARIANT, LISTING_PAGE_PENDING_APPROVAL_VARIANT]),\n  }).isRequired,\n\n  isAuthenticated: bool.isRequired,\n  currentUser: propTypes.currentUser,\n  getListing: func.isRequired,\n  getOwnListing: func.isRequired,\n  onManageDisableScrolling: func.isRequired,\n  scrollingDisabled: bool.isRequired,\n  enquiryModalOpenForListingId: string,\n  showListingError: propTypes.error,\n  callSetInitialValues: func.isRequired,\n  reviews: arrayOf(propTypes.review),\n  fetchReviewsError: propTypes.error,\n  timeSlots: arrayOf(propTypes.timeSlot),\n  fetchTimeSlotsError: propTypes.error,\n  sendEnquiryInProgress: bool.isRequired,\n  sendEnquiryError: propTypes.error,\n  onSendEnquiry: func.isRequired,\n  onInitializeCardPaymentData: func.isRequired,\n  filterConfig: array,\n  onFetchTransactionLineItems: func.isRequired,\n  lineItems: array,\n  fetchLineItemsInProgress: bool.isRequired,\n  fetchLineItemsError: propTypes.error,\n};\n\nconst mapStateToProps = state => {\n  const { isAuthenticated } = state.Auth;\n  const {\n    showListingError,\n    reviews,\n    fetchReviewsError,\n    timeSlots,\n    fetchTimeSlotsError,\n    sendEnquiryInProgress,\n    sendEnquiryError,\n    lineItems,\n    fetchLineItemsInProgress,\n    fetchLineItemsError,\n    enquiryModalOpenForListingId,\n  } = state.ListingPage;\n  const { currentUser } = state.user;\n\n  const getListing = id => {\n    const ref = { id, type: 'listing' };\n    const listings = getMarketplaceEntities(state, [ref]);\n    return listings.length === 1 ? listings[0] : null;\n  };\n\n  const getOwnListing = id => {\n    const ref = { id, type: 'ownListing' };\n    const listings = getMarketplaceEntities(state, [ref]);\n    return listings.length === 1 ? listings[0] : null;\n  };\n\n  return {\n    isAuthenticated,\n    currentUser,\n    getListing,\n    getOwnListing,\n    scrollingDisabled: isScrollingDisabled(state),\n    enquiryModalOpenForListingId,\n    showListingError,\n    reviews,\n    fetchReviewsError,\n    timeSlots,\n    fetchTimeSlotsError,\n    lineItems,\n    fetchLineItemsInProgress,\n    fetchLineItemsError,\n    sendEnquiryInProgress,\n    sendEnquiryError,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  onManageDisableScrolling: (componentId, disableScrolling) =>\n    dispatch(manageDisableScrolling(componentId, disableScrolling)),\n  callSetInitialValues: (setInitialValues, values, saveToSessionStorage) =>\n    dispatch(setInitialValues(values, saveToSessionStorage)),\n  onFetchTransactionLineItems: (bookingData, listingId, isOwnListing) =>\n    dispatch(fetchTransactionLineItems(bookingData, listingId, isOwnListing)),\n  onSendEnquiry: (listingId, message) => dispatch(sendEnquiry(listingId, message)),\n  onInitializeCardPaymentData: () => dispatch(initializeCardPaymentData()),\n});\n\n// Note: it is important that the withRouter HOC is **outside** the\n// connect HOC, otherwise React Router won't rerender any Route\n// components since connect implements a shouldComponentUpdate\n// lifecycle hook.\n//\n// See: https://github.com/ReactTraining/react-router/issues/4671\nconst ListingPage = compose(\n  withRouter,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  injectIntl\n)(ListingPageComponent);\n\nexport default ListingPage;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ListingPage_root__2EM3B\",\"pageRoot\":\"ListingPage_pageRoot__2FTgJ\",\"loadingText\":\"ListingPage_loadingText__HdbHd\",\"errorText\":\"ListingPage_errorText__3FMBP\",\"sectionImages\":\"ListingPage_sectionImages__1BIUK\",\"threeToTwoWrapper\":\"ListingPage_threeToTwoWrapper__n9o3-\",\"aspectWrapper\":\"ListingPage_aspectWrapper__8K7Ij\",\"actionBar\":\"ListingPage_actionBar__ksYT1\",\"ownListingText\":\"ListingPage_ownListingText__21UeF\",\"ownListingTextPendingApproval\":\"ListingPage_ownListingTextPendingApproval__2a3rB\",\"closedListingText\":\"ListingPage_closedListingText__27Tkg\",\"editListingLink\":\"ListingPage_editListingLink__1fWxW\",\"editIcon\":\"ListingPage_editIcon__2nk0I\",\"rootForImage\":\"ListingPage_rootForImage__bG-Dg\",\"viewPhotos\":\"ListingPage_viewPhotos__21TCD\",\"carouselModalScrollLayer\":\"ListingPage_carouselModalScrollLayer__3FDR2\",\"carouselModalContainer\":\"ListingPage_carouselModalContainer__1Z3sZ\",\"contentContainer\":\"ListingPage_contentContainer__2vyEP\",\"mainContent\":\"ListingPage_mainContent__1Amc7\",\"bookingPanel\":\"ListingPage_bookingPanel__187KO\",\"sectionAvatar\":\"ListingPage_sectionAvatar__1SS5-\",\"avatarMobile\":\"ListingPage_avatarMobile__O0-B5\",\"avatarDesktop\":\"ListingPage_avatarDesktop__3r5AL\",\"sectionHeading\":\"ListingPage_sectionHeading__1kxx0\",\"desktopPriceContainer\":\"ListingPage_desktopPriceContainer__3pJUt\",\"desktopPriceValue\":\"ListingPage_desktopPriceValue__2FLH3\",\"desktopPerUnit\":\"ListingPage_desktopPerUnit__1S3eF\",\"heading\":\"ListingPage_heading__2LoXY\",\"title\":\"ListingPage_title__25K_B\",\"author\":\"ListingPage_author__2gkOm\",\"authorNameLink\":\"ListingPage_authorNameLink__2LDBs\",\"contactWrapper\":\"ListingPage_contactWrapper__36eJT\",\"separator\":\"ListingPage_separator__3gmYb\",\"contactLink\":\"ListingPage_contactLink__2ksmf\",\"sectionDescription\":\"ListingPage_sectionDescription__1r_ac\",\"descriptionTitle\":\"ListingPage_descriptionTitle__1P4sw\",\"sectionFeatures\":\"ListingPage_sectionFeatures__19m57\",\"featuresTitle\":\"ListingPage_featuresTitle__1Z5cf\",\"description\":\"ListingPage_description__3JpOG\",\"sectionMap\":\"ListingPage_sectionMap__3pMXN\",\"locationTitle\":\"ListingPage_locationTitle__31Dck\",\"sectionReviews\":\"ListingPage_sectionReviews__1MGWl\",\"reviewsHeading\":\"ListingPage_reviewsHeading__3zmuY\",\"sectionHost\":\"ListingPage_sectionHost__hhvIT\",\"yourHostHeading\":\"ListingPage_yourHostHeading__Pz5ZE\",\"enquiryModalContent\":\"ListingPage_enquiryModalContent__3g25N\",\"enquiryForm\":\"ListingPage_enquiryForm__2s7IU\",\"enquirySubmitButtonWrapper\":\"ListingPage_enquirySubmitButtonWrapper__31PLx\",\"map\":\"ListingPage_map__17kEZ\",\"longWord\":\"ListingPage_longWord__3sxKr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"SectionRulesMaybe_root__3sO-p\",\"title\":\"SectionRulesMaybe_title__1GUQg\",\"rules\":\"SectionRulesMaybe_rules__1Qh2L\"};"],"sourceRoot":""}