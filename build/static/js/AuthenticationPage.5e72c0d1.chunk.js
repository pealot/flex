(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[1],{1116:function(e,t,a){e.exports={layoutWrapperMain:"AuthenticationPage_layoutWrapperMain__3gWAw",root:"AuthenticationPage_root__2RWFg",content:"AuthenticationPage_content__3nHEa",tabs:"AuthenticationPage_tabs__1ppTt",tab:"AuthenticationPage_tab__1SV2L",form:"AuthenticationPage_form__2_HuI",loginForm:"AuthenticationPage_loginForm__HEmUQ",signupForm:"AuthenticationPage_signupForm__bEfKv",bottomWrapper:"AuthenticationPage_bottomWrapper__2pvFT",termsWrapper:"AuthenticationPage_termsWrapper__uCQwW",termsHeading:"AuthenticationPage_termsHeading__OCaVq",hideOnMobile:"AuthenticationPage_hideOnMobile__1jvqT",verifyClose:"AuthenticationPage_verifyClose__3W4UD",closeText:"AuthenticationPage_closeText__1c1ZU",closeIcon:"AuthenticationPage_closeIcon__3n_Wy",modalTitle:"AuthenticationPage_modalTitle__3juH6",modalMessage:"AuthenticationPage_modalMessage__xFsFe",email:"AuthenticationPage_email__3TlJ6",modalHelperLink:"AuthenticationPage_modalHelperLink__3NCgn",modalHelperText:"AuthenticationPage_modalHelperText__-dwS_",modalIcon:"AuthenticationPage_modalIcon__1g-gP",error:"AuthenticationPage_error__1SmGR",signupWithIdpTitle:"AuthenticationPage_signupWithIdpTitle__2aezm",confirmInfoText:"AuthenticationPage_confirmInfoText__1dEBC",buttonIcon:"AuthenticationPage_buttonIcon__15Qjf",socialButtonWrapper:"AuthenticationPage_socialButtonWrapper__bNq0o",socialButtonsOr:"AuthenticationPage_socialButtonsOr__YbZ6c",socialButtonsOrText:"AuthenticationPage_socialButtonsOrText__34yuc"}},1168:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthenticationPageComponent",(function(){return C}));var i=a(8),n=a(1),s=a(16),r=a(11),o=a(12),c=a(14),l=a(13),u=a(3),b=a(2),m=a.n(b),j=a(24),d=a(134),h=a(59),g=a(1114),O=a.n(g),p=a(5),_=a.n(p),f=a(1115),x=(a(34),a(37),a(117),a(4)),P=a(9),A=(a(10),a(15)),N=a(18),E=a(6),T=a(41),v=a(288),I=a(115),S=a(176),L=a(38),W=a(1116),M=a.n(W),k=a(0),H=["fname","lname"],y=["email","firstName","lastName"],C=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).state={tosModalOpen:!1,authError:O.a.get("st-autherror")?JSON.parse(O.a.get("st-autherror").replace("j:","")):null,authInfo:O.a.get("st-authinfo")?JSON.parse(O.a.get("st-authinfo").replace("j:","")):null},i}return Object(o.a)(a,[{key:"componentDidMount",value:function(){O.a.remove("st-autherror")}},{key:"render",value:function(){var e=this,t=this.props,a=t.authInProgress,r=t.currentUser,o=t.intl,c=t.isAuthenticated,l=t.location,u=t.loginError,b=t.scrollingDisabled,m=t.signupError,j=t.submitLogin,d=t.submitSignup,g=t.confirmError,O=t.submitSingupWithIdp,p=t.tab,I=t.sendVerificationEmailInProgress,S=t.sendVerificationEmailError,L=t.onResendVerificationEmail,W=t.onManageDisableScrolling,C="confirm"===p,F="login"===p,D=l.state&&l.state.from?l.state.from:null,V=this.state.authInfo&&this.state.authInfo.from?this.state.authInfo.from:null,U=D||(V||null),B=Object(A.e)(r),q=!!B.id,w=!F&&q&&!B.attributes.emailVerified;if(c&&U)return Object(k.jsx)(h.a,{to:U});if(c&&q&&!w)return Object(k.jsx)(E.Hb,{name:"LandingPage"});var R=Object(k.jsx)("div",{className:M.a.error,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.loginFailed"})}),J=Object(k.jsx)("div",{className:M.a.error,children:Object(N.e)(m)?Object(k.jsx)(x.b,{id:"AuthenticationPage.signupFailedEmailAlreadyTaken"}):Object(k.jsx)(x.b,{id:"AuthenticationPage.signupFailed"})}),K=g?Object(k.jsx)("div",{className:M.a.error,children:Object(N.e)(g)?Object(k.jsx)(x.b,{id:"AuthenticationPage.signupFailedEmailAlreadyTaken"}):Object(k.jsx)(x.b,{id:"AuthenticationPage.signupFailed"})}):null,G=function(e,t){return e?t:null},Q=F?G(u,R):G(m,J),Z={state:U?{from:U}:null},z=[{text:Object(k.jsx)("h1",{className:M.a.tab,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.signupLinkText"})}),selected:!F,linkProps:{name:"SignupPage",to:Z}},{text:Object(k.jsx)("h1",{className:M.a.tab,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.loginLinkText"})}),selected:F,linkProps:{name:"LoginPage",to:Z}}],Y=this.state.authInfo?this.state.authInfo.idpId.replace(/^./,(function(e){return e.toUpperCase()})):null,X=Object(k.jsxs)("div",{className:M.a.content,children:[Object(k.jsx)("h1",{className:M.a.signupWithIdpTitle,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.confirmSignupWithIdpTitle",values:{idp:Y}})}),Object(k.jsx)("p",{className:M.a.confirmInfoText,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.confirmSignupInfoText"})}),K,Object(k.jsx)(T.b,{className:M.a.form,onSubmit:function(t){var a=e.state.authInfo,i=a.idpToken,r=a.email,o=a.firstName,c=a.lastName,l=a.idpId,u=t.email,b=t.firstName,m=t.lastName,j=Object(s.a)(t,y),d=Object(n.a)(Object(n.a)(Object(n.a)({},u!==r&&{email:u}),b!==o&&{firstName:b}),m!==c&&{lastName:m}),h=Object(f.isEmpty)(j)?null:Object(n.a)({},j);O(Object(n.a)(Object(n.a)({idpToken:i,idpId:l},d),!!h&&{protectedData:h}))},inProgress:a,onOpenTermsOfService:function(){return e.setState({tosModalOpen:!0})},authInfo:this.state.authInfo,idp:Y})]}),$=(F?x.b:x.b,F?x.b:x.b,Object(k.jsxs)("div",{className:M.a.content,children:[Object(k.jsx)(E.qb,{className:M.a.tabs,tabs:z}),Q,F?Object(k.jsx)(T.o,{className:M.a.loginForm,onSubmit:j,inProgress:a}):Object(k.jsx)(T.x,{className:M.a.signupForm,onSubmit:function(e){var t=e.fname,a=e.lname,i=Object(s.a)(e,H),r=Object(n.a)({firstName:t.trim(),lastName:a.trim()},i);d(r)},inProgress:a,onOpenTermsOfService:function(){return e.setState({tosModalOpen:!0})}}),null]})),ee=C?X:$,te=B.attributes.profile.firstName,ae=Object(k.jsx)("span",{className:M.a.email,children:B.attributes.email}),ie=Object(k.jsx)(E.gb,{rootClassName:M.a.modalHelperLink,onClick:L,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.resendEmailLinkText"})}),ne=Object(k.jsx)(E.Gb,{className:M.a.modalHelperLink,name:"ContactDetailsPage",children:Object(k.jsx)(x.b,{id:"AuthenticationPage.fixEmailLinkText"})}),se=Object(N.g)(S)?"AuthenticationPage.resendFailedTooManyRequests":"AuthenticationPage.resendFailed",re=S?Object(k.jsx)("p",{className:M.a.error,children:Object(k.jsx)(x.b,{id:se})}):null,oe=Object(k.jsxs)("div",{className:M.a.content,children:[Object(k.jsxs)(E.Gb,{className:M.a.verifyClose,name:"ProfileSettingsPage",children:[Object(k.jsx)("span",{className:M.a.closeText,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.verifyEmailClose"})}),Object(k.jsx)(E.P,{rootClassName:M.a.closeIcon})]}),Object(k.jsx)(E.S,{className:M.a.modalIcon}),Object(k.jsx)("h1",{className:M.a.modalTitle,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.verifyEmailTitle",values:{name:te}})}),Object(k.jsx)("p",{className:M.a.modalMessage,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.verifyEmailText",values:{email:ae}})}),re,Object(k.jsxs)("div",{className:M.a.bottomWrapper,children:[Object(k.jsx)("p",{className:M.a.modalHelperText,children:I?Object(k.jsx)(x.b,{id:"AuthenticationPage.sendingEmail"}):Object(k.jsx)(x.b,{id:"AuthenticationPage.resendEmail",values:{resendEmailLink:ie}})}),Object(k.jsx)("p",{className:M.a.modalHelperText,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.fixEmail",values:{fixEmailLink:ne}})})]})]}),ce=P.a.siteTitle,le=F?o.formatMessage({id:"AuthenticationPage.schemaTitleLogin"},{siteTitle:ce}):o.formatMessage({id:"AuthenticationPage.schemaTitleSignup"},{siteTitle:ce}),ue=_()(Object(i.a)({},M.a.hideOnMobile,w));return Object(k.jsx)(E.Kb,{title:le,scrollingDisabled:b,schema:{"@context":"http://schema.org","@type":"WebPage",name:le},children:Object(k.jsxs)(E.jb,{children:[Object(k.jsx)(E.ob,{children:Object(k.jsx)(v.c,{className:ue})}),Object(k.jsxs)(E.mb,{className:M.a.layoutWrapperMain,children:[Object(k.jsx)("div",{className:M.a.root,children:w?oe:ee}),Object(k.jsx)(E.Db,{id:"AuthenticationPage.tos",isOpen:this.state.tosModalOpen,onClose:function(){return e.setState({tosModalOpen:!1})},usePortal:!0,onManageDisableScrolling:W,children:Object(k.jsxs)("div",{className:M.a.termsWrapper,children:[Object(k.jsx)("h2",{className:M.a.termsHeading,children:Object(k.jsx)(x.b,{id:"AuthenticationPage.termsHeading"})}),Object(k.jsx)(E.tc,{})]})})]}),Object(k.jsx)(E.lb,{children:Object(k.jsx)(E.J,{})})]})})}}]),a}(u.Component);C.defaultProps={currentUser:null,loginError:null,signupError:null,confirmError:null,tab:"signup",sendVerificationEmailError:null,showSocialLoginsForTests:!1};m.a.bool,m.a.func,m.a.object,m.a.oneOf,m.a.shape;var F=Object(j.c)(h.h,Object(d.b)((function(e){var t=e.Auth,a=t.isAuthenticated,i=t.loginError,n=t.signupError,s=t.confirmError,r=e.user,o=r.currentUser,c=r.sendVerificationEmailInProgress,l=r.sendVerificationEmailError;return{authInProgress:Object(I.c)(e),currentUser:o,isAuthenticated:a,loginError:i,scrollingDisabled:Object(S.b)(e),signupError:n,confirmError:s,sendVerificationEmailInProgress:c,sendVerificationEmailError:l}}),(function(e){return{submitLogin:function(t){var a=t.email,i=t.password;return e(Object(I.e)(a,i))},submitSignup:function(t){return e(Object(I.g)(t))},submitSingupWithIdp:function(t){return e(Object(I.h)(t))},onResendVerificationEmail:function(){return e(Object(L.h)())},onManageDisableScrolling:function(t,a){return e(Object(S.c)(t,a))}}})),x.d)(C);t.default=F}}]);
//# sourceMappingURL=AuthenticationPage.5e72c0d1.chunk.js.map