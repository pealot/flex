exports.ids=[14],exports.modules={375:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(53),s=r.n(o),d=r(6),c=r(22),l=r(82),i=r(3),u=r(15),m=(r(10),r(166)),b=r(220),h=r(109),p=r(5),P=r(165),j=r(35),y=r(174),M=r(477),f=r.n(M),g=r(0),O=function(e){var t=Object(d.useState)(!1),r=s()(t,2),n=r[0],o=r[1],c=Object(d.useState)(null),l=s()(c,2),m=l[0],b=l[1],h=e.currentUser,y=e.addPaymentMethodError,M=e.deletePaymentMethodError,O=e.createStripeCustomerError,C=e.handleCardSetupError,S=e.deletePaymentMethodInProgress,E=e.onCreateSetupIntent,x=e.onHandleCardSetup,_=e.onSavePaymentMethod,v=e.onDeletePaymentMethod,D=e.fetchStripeCustomer,I=e.scrollingDisabled,N=e.onManageDisableScrolling,T=e.intl,k=e.stripeCustomerFetched,F=function(e){return e&&e.attributes?e.attributes.clientSecret:null},U=function(e,t){var r=t.name,n=t.addressLine1,o=t.addressLine2,s=t.postal,d=t.state,c=t.city,l=t.country,i=n&&s?{address:{city:c,country:l,line1:n,line2:o,postal_code:s,state:d}}:{};return{payment_method_data:{billing_details:a()({name:r,email:Object(u.e)(e).attributes.email},i)}}},V=function(){v().then((function(){D()}))},K=T.formatMessage({id:"PaymentMethodsPage.title"}),H=Object(u.e)(h),L=!!H.id,R=h&&Object(u.j)(h.stripeCustomer).attributes.stripeCustomerId&&Object(u.i)(h.stripeCustomer.defaultPaymentMethod).id,A={name:L?"".concat(H.attributes.profile.firstName," ").concat(H.attributes.profile.lastName):null},B=R?Object(u.i)(h.stripeCustomer.defaultPaymentMethod).attributes.card:null,J="replaceCard"===m||!R,X=!!R;return Object(g.jsx)(p.Kb,{title:K,scrollingDisabled:I,children:Object(g.jsxs)(p.ib,{children:[Object(g.jsxs)(p.ob,{children:[Object(g.jsx)(P.c,{currentPage:"PaymentMethodsPage",desktopClassName:f.a.desktopTopbar,mobileClassName:f.a.mobileTopbar}),Object(g.jsx)(p.Ac,{selectedPageName:"PaymentMethodsPage"})]}),Object(g.jsx)(p.kb,{currentTab:"PaymentMethodsPage"}),Object(g.jsx)(p.mb,{children:Object(g.jsxs)("div",{className:f.a.content,children:[Object(g.jsx)("h1",{className:f.a.title,children:Object(g.jsx)(i.b,{id:"PaymentMethodsPage.heading"})}),k?Object(g.jsxs)(g.Fragment,{children:[X?Object(g.jsx)(p.Xb,{card:B,onManageDisableScrolling:N,onChange:b,onDeleteCard:V,deletePaymentMethodInProgress:S}):null,J?Object(g.jsx)(j.s,{className:f.a.paymentForm,formId:"PaymentMethodsForm",initialValues:A,onSubmit:function(e){o(!0);var t=Object(u.e)(h).stripeCustomer,r=e.stripe,n=e.card,a=e.formValues;E().then((function(e){var t={stripe:r,card:n,setupIntentClientSecret:F(e),paymentParams:U(h,a)};return x(t)})).then((function(e){var r=e.setupIntent.payment_method;return _(t,r)})).then((function(){D(),o(!1),b("default")})).catch((function(e){console.error(e),o(!1)}))},handleRemovePaymentMethod:V,hasDefaultPaymentMethod:R,addPaymentMethodError:y,deletePaymentMethodError:M,createStripeCustomerError:O,handleCardSetupError:C,inProgress:n}):null]}):null]})}),Object(g.jsx)(p.lb,{children:Object(g.jsx)(p.J,{})})]})})};O.defaultProps={currentUser:null,addPaymentMethodError:null,deletePaymentMethodError:null,createStripeCustomerError:null,handleCardSetupError:null};var C=Object(c.compose)(Object(l.connect)((function(e){var t=e.user.currentUser,r=e.paymentMethods,n=r.deletePaymentMethodInProgress,a=r.addPaymentMethodError,o=r.deletePaymentMethodError,s=r.createStripeCustomerError,d=e.PaymentMethodsPage.stripeCustomerFetched,c=e.stripe.handleCardSetupError;return{currentUser:t,scrollingDisabled:Object(h.b)(e),deletePaymentMethodInProgress:n,addPaymentMethodError:a,deletePaymentMethodError:o,createStripeCustomerError:s,handleCardSetupError:c,stripeCustomerFetched:d}}),(function(e){return{onManageDisableScrolling:function(t,r){return e(Object(h.c)(t,r))},fetchStripeCustomer:function(){return e(Object(y.d)())},onHandleCardSetup:function(t){return e(Object(b.c)(t))},onCreateSetupIntent:function(t){return e(Object(y.a)(t))},onSavePaymentMethod:function(t,r){return e(Object(m.c)(t,r))},onDeletePaymentMethod:function(t){return e(Object(m.b)(t))}}})),i.d)(O);t.default=C},477:function(e,t,r){e.exports={content:"PaymentMethodsPage_content__MoVZb",desktopTopbar:"PaymentMethodsPage_desktopTopbar__kjP3B",mobileTopbar:"PaymentMethodsPage_mobileTopbar__15KoR",title:"PaymentMethodsPage_title__pVxKg"}}};
//# sourceMappingURL=PaymentMethodsPage.bdb8f81b.chunk.js.map