exports.ids=[23],exports.modules={381:function(e,t,r){"use strict";r.r(t),r.d(t,"TransactionPageComponent",(function(){return w}));var s=r(16),n=r.n(s),a=(r(6),r(2)),o=r.n(a),i=r(22),c=r(82),l=r(39),g=r(4),d=r.n(g),u=r(3),b=r(33),h=r(31),m=(r(10),r(15)),f=r(26),P=r(25),j=r(21),I=r(49),M=r(109),S=r(220),E=r(5),O=r(165),T=r(152),p=r(483),v=r.n(p),x=r(0),D=["bookingDates"],w=function(e){var t=e.currentUser,r=e.initialMessageFailedToTransaction,s=e.savePaymentMethodFailed,a=e.fetchMessagesError,o=e.fetchMessagesInProgress,i=e.totalMessagePages,c=e.oldestMessagePageFetched,l=e.fetchTransactionError,g=e.history,I=e.intl,M=e.messages,S=e.onManageDisableScrolling,T=e.onSendMessage,p=e.onSendReview,w=e.onShowMoreMessages,F=e.params,_=e.scrollingDisabled,R=e.sendMessageError,k=e.sendMessageInProgress,y=e.sendReviewError,L=e.sendReviewInProgress,C=e.transaction,V=e.transactionRole,N=e.acceptInProgress,U=e.acceptSaleError,A=e.declineInProgress,H=e.declineSaleError,q=e.onAcceptSale,z=e.onDeclineSale,B=e.timeSlots,J=e.fetchTimeSlotsError,K=e.processTransitions,W=e.callSetInitialValues,G=e.onInitializeCardPaymentData,Q=e.onFetchTransactionLineItems,X=e.lineItems,Y=e.fetchLineItemsInProgress,Z=e.fetchLineItemsError,$=Object(m.l)(C),ee=Object(m.g)($.listing),te="provider"===V,re="customer"===V,se=function(e,t){var r=Object(h.b)(),s=Object(b.c)("CheckoutPage",r).setInitialValues;W(s,e),G(),g.push(Object(b.b)("CheckoutPage",r,{id:ee.id.uuid,slug:Object(P.f)(ee.attributes.title)},{}))};if(Object(j.J)($)&&re&&$.attributes.lineItems){var ne=Object(m.g)($.booking),ae={listing:ee,transaction:$,bookingData:{},bookingDates:{bookingStart:Object(f.c)(ne.attributes.start),bookingEnd:Object(f.c)(ne.attributes.end)}};se(ae)}var oe=I.formatMessage({id:"TransactionPage.deletedListing"}),ie=ee.attributes.deleted?oe:ee.attributes.title,ce=t&&$.id&&$.id.uuid===F.id&&$.attributes.lineItems&&$.customer&&$.provider&&!l,le=ce&&te&&t.id.uuid===$.provider.id.uuid,ge=ce&&re&&t.id.uuid===$.customer.id.uuid;if(ce&&te&&!le)return console.error("Tried to access a sale that was not owned by the current user"),Object(x.jsx)(E.Hb,{name:"InboxPage",params:{tab:"sales"}});if(ce&&re&&!ge)return console.error("Tried to access an order that was not owned by the current user"),Object(x.jsx)(E.Hb,{name:"InboxPage",params:{tab:"orders"}});var de=d()(v.a.tabContent,v.a.tabContentVisible),ue=re?"TransactionPage.fetchOrderFailed":"TransactionPage.fetchSaleFailed",be=re?"TransactionPage.loadingOrderData":"TransactionPage.loadingSaleData",he=l?Object(x.jsx)("p",{className:v.a.error,children:Object(x.jsx)(u.b,{id:"".concat(ue)})}):Object(x.jsx)("p",{className:v.a.loading,children:Object(x.jsx)(u.b,{id:"".concat(be)})}),me=!(!r||!$.id||r.uuid!==$.id.uuid),fe=ce?Object(x.jsx)(E.xc,{className:de,currentUser:t,transaction:$,fetchMessagesInProgress:o,totalMessagePages:i,oldestMessagePageFetched:c,messages:M,initialMessageFailed:me,savePaymentMethodFailed:s,fetchMessagesError:a,sendMessageInProgress:k,sendMessageError:R,sendReviewInProgress:L,sendReviewError:y,onManageDisableScrolling:S,onShowMoreMessages:w,onSendMessage:T,onSendReview:p,transactionRole:V,onAcceptSale:q,onDeclineSale:z,acceptInProgress:N,declineInProgress:A,acceptSaleError:U,declineSaleError:H,nextTransitions:K,onSubmitBookingRequest:function(e){var t=e.bookingDates,r=n()(e,D),s={listing:ee,transaction:$,bookingData:r,bookingDates:{bookingStart:t.startDate,bookingEnd:t.endDate},confirmPaymentError:null};se(s)},timeSlots:B,fetchTimeSlotsError:J,onFetchTransactionLineItems:Q,lineItems:X,fetchLineItemsInProgress:Y,fetchLineItemsError:Z}):he;return Object(x.jsx)(E.Kb,{title:I.formatMessage({id:"TransactionPage.title"},{title:ie}),scrollingDisabled:_,children:Object(x.jsxs)(E.jb,{children:[Object(x.jsx)(E.ob,{children:Object(x.jsx)(O.c,{})}),Object(x.jsx)(E.mb,{children:Object(x.jsx)("div",{className:v.a.root,children:fe})}),Object(x.jsx)(E.lb,{className:v.a.footer,children:Object(x.jsx)(E.J,{})})]})})};w.defaultProps={currentUser:null,fetchTransactionError:null,acceptSaleError:null,declineSaleError:null,transaction:null,fetchMessagesError:null,initialMessageFailedToTransaction:null,savePaymentMethodFailed:!1,sendMessageError:null,timeSlots:null,fetchTimeSlotsError:null,lineItems:null,fetchLineItemsError:null};o.a.bool,o.a.func,o.a.oneOf,o.a.shape,o.a.string,o.a.array,o.a.arrayOf,o.a.number;var F=Object(i.compose)(l.withRouter,Object(c.connect)((function(e){var t=e.TransactionPage,r=t.fetchTransactionError,s=t.acceptSaleError,n=t.declineSaleError,a=t.acceptInProgress,o=t.declineInProgress,i=t.transactionRef,c=t.fetchMessagesInProgress,l=t.fetchMessagesError,g=t.totalMessagePages,d=t.oldestMessagePageFetched,u=t.messages,b=t.initialMessageFailedToTransaction,h=t.savePaymentMethodFailed,m=t.sendMessageInProgress,f=t.sendMessageError,P=t.sendReviewInProgress,j=t.sendReviewError,S=t.timeSlots,E=t.fetchTimeSlotsError,O=t.processTransitions,T=t.lineItems,p=t.fetchLineItemsInProgress,v=t.fetchLineItemsError,x=e.user.currentUser,D=Object(I.d)(e,i?[i]:[]),w=D.length>0?D[0]:null;return{currentUser:x,fetchTransactionError:r,acceptSaleError:s,declineSaleError:n,acceptInProgress:a,declineInProgress:o,scrollingDisabled:Object(M.b)(e),transaction:w,fetchMessagesInProgress:c,fetchMessagesError:l,totalMessagePages:g,oldestMessagePageFetched:d,messages:u,initialMessageFailedToTransaction:b,savePaymentMethodFailed:h,sendMessageInProgress:m,sendMessageError:f,sendReviewInProgress:P,sendReviewError:j,timeSlots:S,fetchTimeSlotsError:E,processTransitions:O,lineItems:T,fetchLineItemsInProgress:p,fetchLineItemsError:v}}),(function(e){return{onAcceptSale:function(t){return e(Object(T.a)(t))},onDeclineSale:function(t){return e(Object(T.b)(t))},onShowMoreMessages:function(t){return e(Object(T.d)(t))},onSendMessage:function(t,r){return e(Object(T.g)(t,r))},onManageDisableScrolling:function(t,r){return e(Object(M.c)(t,r))},onSendReview:function(t,r,s,n){return e(Object(T.h)(t,r,s,n))},callSetInitialValues:function(t,r){return e(t(r))},onInitializeCardPaymentData:function(){return e(Object(S.d)())},onFetchTransactionLineItems:function(t,r,s){return e(Object(T.e)(t,r,s))}}})),u.d)(w);t.default=F},483:function(e,t,r){e.exports={root:"TransactionPage_root__E51Rc",loading:"TransactionPage_loading__BnqWb",error:"TransactionPage_error__1rKgg",tabContent:"TransactionPage_tabContent__12lDI",tabContentVisible:"TransactionPage_tabContentVisible__jHxbC",footer:"TransactionPage_footer__1chun"}}};
//# sourceMappingURL=TransactionPage.8c8f647a.chunk.js.map