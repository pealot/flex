{"version":3,"sources":["containers/ContactDetailsPage/ContactDetailsPage.js","containers/ContactDetailsPage/ContactDetailsPage.module.css"],"names":["ContactDetailsPageComponent","props","saveEmailError","savePhoneNumberError","saveContactDetailsInProgress","currentUser","contactDetailsChanged","onChange","scrollingDisabled","sendVerificationEmailInProgress","sendVerificationEmailError","onResendVerificationEmail","onSubmitContactDetails","onResetPassword","resetPasswordInProgress","resetPasswordError","intl","user","ensureCurrentUser","currentEmail","attributes","email","currentPhoneNumber","profile","protectedData","phoneNumber","contactInfoForm","id","className","css","form","initialValues","onSubmit","values","inProgress","ready","title","formatMessage","currentPage","desktopClassName","desktopTopbar","mobileClassName","mobileTopbar","selectedPageName","currentTab","content","defaultProps","PropTypes","bool","func","ContactDetailsPage","compose","connect","state","isScrollingDisabled","dispatch","saveContactDetailsClear","sendVerificationEmail","saveContactDetails","resetPassword","injectIntl","module","exports"],"mappings":"kSA6BaA,EAA8B,SAAAC,GACzC,IACEC,EAeED,EAfFC,eACAC,EAcEF,EAdFE,qBACAC,EAaEH,EAbFG,6BACAC,EAYEJ,EAZFI,YACAC,EAWEL,EAXFK,sBACAC,EAUEN,EAVFM,SACAC,EASEP,EATFO,kBACAC,EAQER,EARFQ,gCACAC,EAOET,EAPFS,2BACAC,EAMEV,EANFU,0BACAC,EAKEX,EALFW,uBACAC,EAIEZ,EAJFY,gBACAC,EAGEb,EAHFa,wBACAC,EAEEd,EAFFc,mBACAC,EACEf,EADFe,KAGIC,EAAOC,YAAkBb,GACzBc,EAAeF,EAAKG,WAAWC,OAAS,GAExCC,GADgBL,EAAKG,WAAWG,QAAQC,eAAiB,IACtBC,aAAe,GAClDC,EAAkBT,EAAKU,GAC3B,cAAC,IAAD,CACEC,UAAWC,IAAIC,KACfC,cAAe,CAAEV,MAAOF,EAAcM,YAAaH,GACnDpB,eAAgBA,EAChBC,qBAAsBA,EACtBE,YAAaA,EACbM,0BAA2BA,EAC3BE,gBAAiBA,EACjBmB,SAAU,SAAAC,GAAM,OAAIrB,EAAuB,WAAKqB,GAAN,IAAcd,eAAcG,yBACtEf,SAAUA,EACV2B,WAAY9B,EACZ+B,MAAO7B,EACPG,gCAAiCA,EACjCC,2BAA4BA,EAC5BI,wBAAyBA,EACzBC,mBAAoBA,IAEpB,KAEEqB,EAAQpB,EAAKqB,cAAc,CAAEV,GAAI,6BAEvC,OACE,cAAC,KAAD,CAAMS,MAAOA,EAAO5B,kBAAmBA,EAAvC,SACE,eAAC,KAAD,WACE,eAAC,KAAD,WACE,cAAC,IAAD,CACE8B,YAAY,qBACZC,iBAAkBV,IAAIW,cACtBC,gBAAiBZ,IAAIa,eAEvB,cAAC,KAAD,CAASC,iBAAiB,0BAE5B,cAAC,KAAD,CAAqCC,WAAW,uBAChD,cAAC,KAAD,UACE,sBAAKhB,UAAWC,IAAIgB,QAApB,UACE,oBAAIjB,UAAWC,IAAIO,MAAnB,SACE,cAAC,IAAD,CAAkBT,GAAG,iCAEtBD,OAGL,cAAC,KAAD,UACE,cAAC,IAAD,YAOV1B,EAA4B8C,aAAe,CACzC5C,eAAgB,KAChBC,qBAAsB,KACtBE,YAAa,KACbK,2BAA4B,KAC5BI,yBAAyB,EACzBC,mBAAoB,MAGCgC,IAAfC,KAAeD,IAATE,KAAd,IAqDMC,EAAqBC,kBACzBC,mBAjCsB,SAAAC,GAEtB,MAAqFA,EAAMpC,KAAnFZ,EAAR,EAAQA,YAAaI,EAArB,EAAqBA,gCAAiCC,EAAtD,EAAsDA,2BACtD,EAOI2C,EAAMH,mBANRhD,EADF,EACEA,eACAC,EAFF,EAEEA,qBACAC,EAHF,EAGEA,6BACAE,EAJF,EAIEA,sBACAQ,EALF,EAKEA,wBACAC,EANF,EAMEA,mBAEF,MAAO,CACLb,iBACAC,uBACAC,+BACAC,cACAC,wBACAE,kBAAmB8C,YAAoBD,GACvC5C,kCACAC,6BACAI,0BACAC,yBAIuB,SAAAwC,GAAQ,MAAK,CACtChD,SAAU,kBAAMgD,EAASC,gBACzB7C,0BAA2B,kBAAM4C,EAASE,gBAC1C7C,uBAAwB,SAAAqB,GAAM,OAAIsB,EAASG,YAAmBzB,KAC9DpB,gBAAiB,SAAAoB,GAAM,OAAIsB,EAASI,YAAc1B,SAQlD2B,IALyBT,CAMzBnD,GAEakD,a,oBC3KfW,EAAOC,QAAU,CAAC,QAAU,oCAAoC,cAAgB,0CAA0C,aAAe,yCAAyC,MAAQ","file":"ContactDetailsPage.b7613e14.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { FormattedMessage, injectIntl, intlShape } from '../../util/reactIntl';\nimport { propTypes } from '../../util/types';\nimport { ensureCurrentUser } from '../../util/data';\nimport { sendVerificationEmail } from '../../ducks/user.duck';\nimport {\n  LayoutSideNavigation,\n  LayoutWrapperMain,\n  LayoutWrapperAccountSettingsSideNav,\n  LayoutWrapperTopbar,\n  LayoutWrapperFooter,\n  Footer,\n  Page,\n  UserNav,\n} from '../../components';\nimport { ContactDetailsForm } from '../../forms';\nimport { TopbarContainer } from '../../containers';\n\nimport { isScrollingDisabled } from '../../ducks/UI.duck';\nimport {\n  saveContactDetails,\n  saveContactDetailsClear,\n  resetPassword,\n} from './ContactDetailsPage.duck';\nimport css from './ContactDetailsPage.module.css';\n\nexport const ContactDetailsPageComponent = props => {\n  const {\n    saveEmailError,\n    savePhoneNumberError,\n    saveContactDetailsInProgress,\n    currentUser,\n    contactDetailsChanged,\n    onChange,\n    scrollingDisabled,\n    sendVerificationEmailInProgress,\n    sendVerificationEmailError,\n    onResendVerificationEmail,\n    onSubmitContactDetails,\n    onResetPassword,\n    resetPasswordInProgress,\n    resetPasswordError,\n    intl,\n  } = props;\n\n  const user = ensureCurrentUser(currentUser);\n  const currentEmail = user.attributes.email || '';\n  const protectedData = user.attributes.profile.protectedData || {};\n  const currentPhoneNumber = protectedData.phoneNumber || '';\n  const contactInfoForm = user.id ? (\n    <ContactDetailsForm\n      className={css.form}\n      initialValues={{ email: currentEmail, phoneNumber: currentPhoneNumber }}\n      saveEmailError={saveEmailError}\n      savePhoneNumberError={savePhoneNumberError}\n      currentUser={currentUser}\n      onResendVerificationEmail={onResendVerificationEmail}\n      onResetPassword={onResetPassword}\n      onSubmit={values => onSubmitContactDetails({ ...values, currentEmail, currentPhoneNumber })}\n      onChange={onChange}\n      inProgress={saveContactDetailsInProgress}\n      ready={contactDetailsChanged}\n      sendVerificationEmailInProgress={sendVerificationEmailInProgress}\n      sendVerificationEmailError={sendVerificationEmailError}\n      resetPasswordInProgress={resetPasswordInProgress}\n      resetPasswordError={resetPasswordError}\n    />\n  ) : null;\n\n  const title = intl.formatMessage({ id: 'ContactDetailsPage.title' });\n\n  return (\n    <Page title={title} scrollingDisabled={scrollingDisabled}>\n      <LayoutSideNavigation>\n        <LayoutWrapperTopbar>\n          <TopbarContainer\n            currentPage=\"ContactDetailsPage\"\n            desktopClassName={css.desktopTopbar}\n            mobileClassName={css.mobileTopbar}\n          />\n          <UserNav selectedPageName=\"ContactDetailsPage\" />\n        </LayoutWrapperTopbar>\n        <LayoutWrapperAccountSettingsSideNav currentTab=\"ContactDetailsPage\" />\n        <LayoutWrapperMain>\n          <div className={css.content}>\n            <h1 className={css.title}>\n              <FormattedMessage id=\"ContactDetailsPage.heading\" />\n            </h1>\n            {contactInfoForm}\n          </div>\n        </LayoutWrapperMain>\n        <LayoutWrapperFooter>\n          <Footer />\n        </LayoutWrapperFooter>\n      </LayoutSideNavigation>\n    </Page>\n  );\n};\n\nContactDetailsPageComponent.defaultProps = {\n  saveEmailError: null,\n  savePhoneNumberError: null,\n  currentUser: null,\n  sendVerificationEmailError: null,\n  resetPasswordInProgress: false,\n  resetPasswordError: null,\n};\n\nconst { bool, func } = PropTypes;\n\nContactDetailsPageComponent.propTypes = {\n  saveEmailError: propTypes.error,\n  savePhoneNumberError: propTypes.error,\n  saveContactDetailsInProgress: bool.isRequired,\n  currentUser: propTypes.currentUser,\n  contactDetailsChanged: bool.isRequired,\n  onChange: func.isRequired,\n  onSubmitContactDetails: func.isRequired,\n  scrollingDisabled: bool.isRequired,\n  sendVerificationEmailInProgress: bool.isRequired,\n  sendVerificationEmailError: propTypes.error,\n  onResendVerificationEmail: func.isRequired,\n  resetPasswordInProgress: bool,\n  resetPasswordError: propTypes.error,\n\n  // from injectIntl\n  intl: intlShape.isRequired,\n};\n\nconst mapStateToProps = state => {\n  // Topbar needs user info.\n  const { currentUser, sendVerificationEmailInProgress, sendVerificationEmailError } = state.user;\n  const {\n    saveEmailError,\n    savePhoneNumberError,\n    saveContactDetailsInProgress,\n    contactDetailsChanged,\n    resetPasswordInProgress,\n    resetPasswordError,\n  } = state.ContactDetailsPage;\n  return {\n    saveEmailError,\n    savePhoneNumberError,\n    saveContactDetailsInProgress,\n    currentUser,\n    contactDetailsChanged,\n    scrollingDisabled: isScrollingDisabled(state),\n    sendVerificationEmailInProgress,\n    sendVerificationEmailError,\n    resetPasswordInProgress,\n    resetPasswordError,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: () => dispatch(saveContactDetailsClear()),\n  onResendVerificationEmail: () => dispatch(sendVerificationEmail()),\n  onSubmitContactDetails: values => dispatch(saveContactDetails(values)),\n  onResetPassword: values => dispatch(resetPassword(values)),\n});\n\nconst ContactDetailsPage = compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  injectIntl\n)(ContactDetailsPageComponent);\n\nexport default ContactDetailsPage;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ContactDetailsPage_content__1Cdn7\",\"desktopTopbar\":\"ContactDetailsPage_desktopTopbar__3g4Y5\",\"mobileTopbar\":\"ContactDetailsPage_mobileTopbar__1OXlr\",\"title\":\"ContactDetailsPage_title__3UEQW\"};"],"sourceRoot":""}